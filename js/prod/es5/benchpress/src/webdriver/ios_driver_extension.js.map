{"version":3,"sources":["ios_driver_extension.es6"],"names":[],"mappings":"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","file":"benchpress/src/webdriver/ios_driver_extension.js","sourcesContent":["import {bind} from 'angular2/di';\nimport {ListWrapper,\n  StringMap} from 'angular2/src/facade/collection';\nimport {Json,\n  isPresent,\n  isBlank,\n  RegExpWrapper,\n  StringWrapper,\n  BaseException} from 'angular2/src/facade/lang';\nimport {WebDriverExtension,\n  PerfLogFeatures} from '../web_driver_extension';\nimport {WebDriverAdapter} from '../web_driver_adapter';\nimport {Promise} from 'angular2/src/facade/async';\nexport class IOsDriverExtension extends WebDriverExtension {\n  static get BINDINGS() {\n    return _BINDINGS;\n  }\n  constructor(driver) {\n    super();\n    this._driver = driver;\n  }\n  gc() {\n    throw new BaseException('Force GC is not supported on iOS');\n  }\n  timeBegin(name) {\n    return this._driver.executeScript(`console.time('${name}');`);\n  }\n  timeEnd(name, restartName = null) {\n    var script = `console.timeEnd('${name}');`;\n    if (isPresent(restartName)) {\n      script += `console.time('${restartName}');`;\n    }\n    return this._driver.executeScript(script);\n  }\n  readPerfLog() {\n    return this._driver.executeScript('1+1').then((_) => this._driver.logs('performance')).then((entries) => {\n      var records = [];\n      ListWrapper.forEach(entries, function(entry) {\n        var message = Json.parse(entry['message'])['message'];\n        if (StringWrapper.equals(message['method'], 'Timeline.eventRecorded')) {\n          ListWrapper.push(records, message['params']['record']);\n        }\n      });\n      return this._convertPerfRecordsToEvents(records);\n    });\n  }\n  _convertPerfRecordsToEvents(records, events = null) {\n    if (isBlank(events)) {\n      events = [];\n    }\n    records.forEach((record) => {\n      var endEvent = null;\n      var type = record['type'];\n      var data = record['data'];\n      var startTime = record['startTime'];\n      var endTime = record['endTime'];\n      if (StringWrapper.equals(type, 'FunctionCall') && (isBlank(data) || !StringWrapper.equals(data['scriptName'], 'InjectedScript'))) {\n        ListWrapper.push(events, createStartEvent('script', startTime));\n        endEvent = createEndEvent('script', endTime);\n      } else if (StringWrapper.equals(type, 'Time')) {\n        ListWrapper.push(events, createMarkStartEvent(data['message'], startTime));\n      } else if (StringWrapper.equals(type, 'TimeEnd')) {\n        ListWrapper.push(events, createMarkEndEvent(data['message'], startTime));\n      } else if (StringWrapper.equals(type, 'RecalculateStyles') || StringWrapper.equals(type, 'Layout') || StringWrapper.equals(type, 'UpdateLayerTree') || StringWrapper.equals(type, 'Paint') || StringWrapper.equals(type, 'Rasterize') || StringWrapper.equals(type, 'CompositeLayers')) {\n        ListWrapper.push(events, createStartEvent('render', startTime));\n        endEvent = createEndEvent('render', endTime);\n      }\n      if (isPresent(record['children'])) {\n        this._convertPerfRecordsToEvents(record['children'], events);\n      }\n      if (isPresent(endEvent)) {\n        ListWrapper.push(events, endEvent);\n      }\n    });\n    return events;\n  }\n  perfLogFeatures() {\n    return new PerfLogFeatures({render: true});\n  }\n  supports(capabilities) {\n    return StringWrapper.equals(capabilities['browserName'].toLowerCase(), 'safari');\n  }\n}\nObject.defineProperty(IOsDriverExtension, \"parameters\", {get: function() {\n    return [[WebDriverAdapter]];\n  }});\nObject.defineProperty(IOsDriverExtension.prototype.timeBegin, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(IOsDriverExtension.prototype.timeEnd, \"parameters\", {get: function() {\n    return [[assert.type.string], [assert.type.string]];\n  }});\nObject.defineProperty(IOsDriverExtension.prototype.supports, \"parameters\", {get: function() {\n    return [[StringMap]];\n  }});\nfunction createEvent(ph, name, time, args = null) {\n  var result = {\n    'cat': 'timeline',\n    'name': name,\n    'ts': time,\n    'ph': ph,\n    'pid': 'pid0'\n  };\n  if (isPresent(args)) {\n    result['args'] = args;\n  }\n  return result;\n}\nfunction createStartEvent(name, time, args = null) {\n  return createEvent('B', name, time, args);\n}\nfunction createEndEvent(name, time, args = null) {\n  return createEvent('E', name, time, args);\n}\nfunction createMarkStartEvent(name, time) {\n  return createEvent('b', name, time);\n}\nfunction createMarkEndEvent(name, time) {\n  return createEvent('e', name, time);\n}\nvar _BINDINGS = [bind(IOsDriverExtension).toFactory((driver) => new IOsDriverExtension(driver), [WebDriverAdapter])];\n//# sourceMappingURL=ios_driver_extension.js.map\n\n//# sourceMappingURL=./ios_driver_extension.map"]}