{"version":3,"sources":["event_manager.es6"],"names":[],"mappings":"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","file":"angular2/src/render/dom/events/event_manager.js","sourcesContent":["import {isBlank,\n  BaseException,\n  isPresent,\n  StringWrapper} from 'angular2/src/facade/lang';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {List,\n  ListWrapper,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {VmTurnZone} from 'angular2/src/core/zone/vm_turn_zone';\nvar BUBBLE_SYMBOL = '^';\nexport class EventManager {\n  constructor(plugins, zone) {\n    this._zone = zone;\n    this._plugins = plugins;\n    for (var i = 0; i < plugins.length; i++) {\n      plugins[i].manager = this;\n    }\n  }\n  addEventListener(element, eventName, handler) {\n    var withoutBubbleSymbol = this._removeBubbleSymbol(eventName);\n    var plugin = this._findPluginFor(withoutBubbleSymbol);\n    plugin.addEventListener(element, withoutBubbleSymbol, handler, withoutBubbleSymbol != eventName);\n  }\n  addGlobalEventListener(target, eventName, handler) {\n    var withoutBubbleSymbol = this._removeBubbleSymbol(eventName);\n    var plugin = this._findPluginFor(withoutBubbleSymbol);\n    return plugin.addGlobalEventListener(target, withoutBubbleSymbol, handler, withoutBubbleSymbol != eventName);\n  }\n  getZone() {\n    return this._zone;\n  }\n  _findPluginFor(eventName) {\n    var plugins = this._plugins;\n    for (var i = 0; i < plugins.length; i++) {\n      var plugin = plugins[i];\n      if (plugin.supports(eventName)) {\n        return plugin;\n      }\n    }\n    throw new BaseException(`No event manager plugin found for event ${eventName}`);\n  }\n  _removeBubbleSymbol(eventName) {\n    return eventName[0] == BUBBLE_SYMBOL ? StringWrapper.substring(eventName, 1) : eventName;\n  }\n}\nObject.defineProperty(EventManager, \"parameters\", {get: function() {\n    return [[assert.genericType(List, EventManagerPlugin)], [VmTurnZone]];\n  }});\nObject.defineProperty(EventManager.prototype.addEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function]];\n  }});\nObject.defineProperty(EventManager.prototype.addGlobalEventListener, \"parameters\", {get: function() {\n    return [[assert.type.string], [assert.type.string], [Function]];\n  }});\nObject.defineProperty(EventManager.prototype._findPluginFor, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(EventManager.prototype._removeBubbleSymbol, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nexport class EventManagerPlugin {\n  supports(eventName) {\n    return false;\n  }\n  addEventListener(element, eventName, handler, shouldSupportBubble) {\n    throw \"not implemented\";\n  }\n  addGlobalEventListener(element, eventName, handler, shouldSupportBubble) {\n    throw \"not implemented\";\n  }\n}\nObject.defineProperty(EventManagerPlugin.prototype.supports, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(EventManagerPlugin.prototype.addEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function], [assert.type.boolean]];\n  }});\nObject.defineProperty(EventManagerPlugin.prototype.addGlobalEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function], [assert.type.boolean]];\n  }});\nexport class DomEventsPlugin extends EventManagerPlugin {\n  supports(eventName) {\n    return true;\n  }\n  addEventListener(element, eventName, handler, shouldSupportBubble) {\n    var outsideHandler = this._getOutsideHandler(shouldSupportBubble, element, handler, this.manager._zone);\n    this.manager._zone.runOutsideAngular(() => {\n      DOM.on(element, eventName, outsideHandler);\n    });\n  }\n  addGlobalEventListener(target, eventName, handler, shouldSupportBubble) {\n    var element = DOM.getGlobalEventTarget(target);\n    var outsideHandler = this._getOutsideHandler(shouldSupportBubble, element, handler, this.manager._zone);\n    return this.manager._zone.runOutsideAngular(() => {\n      return DOM.onAndCancel(element, eventName, outsideHandler);\n    });\n  }\n  _getOutsideHandler(shouldSupportBubble, element, handler, zone) {\n    return shouldSupportBubble ? DomEventsPlugin.bubbleCallback(element, handler, zone) : DomEventsPlugin.sameElementCallback(element, handler, zone);\n  }\n  static sameElementCallback(element, handler, zone) {\n    return (event) => {\n      if (event.target === element) {\n        zone.run(() => handler(event));\n      }\n    };\n  }\n  static bubbleCallback(element, handler, zone) {\n    return (event) => zone.run(() => handler(event));\n  }\n}\nObject.defineProperty(DomEventsPlugin.prototype.supports, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(DomEventsPlugin.prototype.addEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function], [assert.type.boolean]];\n  }});\nObject.defineProperty(DomEventsPlugin.prototype.addGlobalEventListener, \"parameters\", {get: function() {\n    return [[assert.type.string], [assert.type.string], [Function], [assert.type.boolean]];\n  }});\nObject.defineProperty(DomEventsPlugin.prototype._getOutsideHandler, \"parameters\", {get: function() {\n    return [[assert.type.boolean], [], [Function], [VmTurnZone]];\n  }});\n//# sourceMappingURL=event_manager.js.map\n\n//# sourceMappingURL=./event_manager.map"]}