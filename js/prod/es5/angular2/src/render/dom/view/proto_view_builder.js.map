{"version":3,"sources":["proto_view_builder.es6"],"names":[],"mappings":"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","file":"angular2/src/render/dom/view/proto_view_builder.js","sourcesContent":["import {isPresent,\n  isBlank,\n  BaseException} from 'angular2/src/facade/lang';\nimport {ListWrapper,\n  MapWrapper,\n  Set,\n  SetWrapper,\n  List} from 'angular2/src/facade/collection';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {ASTWithSource,\n  AST,\n  AstTransformer,\n  AccessMember,\n  LiteralArray,\n  ImplicitReceiver} from 'angular2/change_detection';\nimport {SetterFn} from 'angular2/src/reflection/types';\nimport {RenderProtoView} from './proto_view';\nimport {ElementBinder,\n  Event} from './element_binder';\nimport {setterFactory} from './property_setter_factory';\nimport * as api from '../../api';\nimport * as directDomRenderer from '../direct_dom_renderer';\nimport {NG_BINDING_CLASS,\n  EVENT_TARGET_SEPARATOR} from '../util';\nexport class ProtoViewBuilder {\n  constructor(rootElement) {\n    this.rootElement = rootElement;\n    this.elements = [];\n    this.isRootView = false;\n    this.variableBindings = MapWrapper.create();\n  }\n  bindElement(element, description = null) {\n    var builder = new ElementBinderBuilder(this.elements.length, element, description);\n    ListWrapper.push(this.elements, builder);\n    DOM.addClass(element, NG_BINDING_CLASS);\n    return builder;\n  }\n  bindVariable(name, value) {\n    MapWrapper.set(this.variableBindings, value, name);\n  }\n  setIsRootView(value) {\n    this.isRootView = value;\n  }\n  build() {\n    var renderElementBinders = [];\n    var apiElementBinders = [];\n    ListWrapper.forEach(this.elements, (ebb) => {\n      var propertySetters = MapWrapper.create();\n      var apiDirectiveBinders = ListWrapper.map(ebb.directives, (db) => {\n        ebb.eventBuilder.merge(db.eventBuilder);\n        return new api.DirectiveBinder({\n          directiveIndex: db.directiveIndex,\n          propertyBindings: db.propertyBindings,\n          eventBindings: db.eventBindings\n        });\n      });\n      MapWrapper.forEach(ebb.propertySetters, (setter, propertyName) => {\n        MapWrapper.set(propertySetters, propertyName, setter);\n      });\n      var nestedProtoView = isPresent(ebb.nestedProtoView) ? ebb.nestedProtoView.build() : null;\n      var parentIndex = isPresent(ebb.parent) ? ebb.parent.index : -1;\n      ListWrapper.push(apiElementBinders, new api.ElementBinder({\n        index: ebb.index,\n        parentIndex: parentIndex,\n        distanceToParent: ebb.distanceToParent,\n        directives: apiDirectiveBinders,\n        nestedProtoView: nestedProtoView,\n        propertyBindings: ebb.propertyBindings,\n        variableBindings: ebb.variableBindings,\n        eventBindings: ebb.eventBindings,\n        textBindings: ebb.textBindings,\n        readAttributes: ebb.readAttributes\n      }));\n      ListWrapper.push(renderElementBinders, new ElementBinder({\n        textNodeIndices: ebb.textBindingIndices,\n        contentTagSelector: ebb.contentTagSelector,\n        parentIndex: parentIndex,\n        distanceToParent: ebb.distanceToParent,\n        nestedProtoView: isPresent(nestedProtoView) ? nestedProtoView.render.delegate : null,\n        componentId: ebb.componentId,\n        eventLocals: new LiteralArray(ebb.eventBuilder.buildEventLocals()),\n        localEvents: ebb.eventBuilder.buildLocalEvents(),\n        globalEvents: ebb.eventBuilder.buildGlobalEvents(),\n        propertySetters: propertySetters\n      }));\n    });\n    return new api.ProtoViewDto({\n      render: new directDomRenderer.DirectDomProtoViewRef(new RenderProtoView({\n        element: this.rootElement,\n        elementBinders: renderElementBinders,\n        isRootView: this.isRootView\n      })),\n      elementBinders: apiElementBinders,\n      variableBindings: this.variableBindings\n    });\n  }\n}\nexport class ElementBinderBuilder {\n  constructor(index, element, description) {\n    this.element = element;\n    this.index = index;\n    this.parent = null;\n    this.distanceToParent = 0;\n    this.directives = [];\n    this.nestedProtoView = null;\n    this.propertyBindings = MapWrapper.create();\n    this.variableBindings = MapWrapper.create();\n    this.eventBindings = ListWrapper.create();\n    this.eventBuilder = new EventBuilder();\n    this.textBindings = [];\n    this.textBindingIndices = [];\n    this.contentTagSelector = null;\n    this.propertySetters = MapWrapper.create();\n    this.componentId = null;\n    this.readAttributes = MapWrapper.create();\n  }\n  setParent(parent, distanceToParent) {\n    this.parent = parent;\n    if (isPresent(parent)) {\n      this.distanceToParent = distanceToParent;\n    }\n    return this;\n  }\n  readAttribute(attrName) {\n    if (isBlank(MapWrapper.get(this.readAttributes, attrName))) {\n      MapWrapper.set(this.readAttributes, attrName, DOM.getAttribute(this.element, attrName));\n    }\n  }\n  bindDirective(directiveIndex) {\n    var directive = new DirectiveBuilder(directiveIndex);\n    ListWrapper.push(this.directives, directive);\n    return directive;\n  }\n  bindNestedProtoView(rootElement) {\n    if (isPresent(this.nestedProtoView)) {\n      throw new BaseException('Only one nested view per element is allowed');\n    }\n    this.nestedProtoView = new ProtoViewBuilder(rootElement);\n    return this.nestedProtoView;\n  }\n  bindProperty(name, expression) {\n    MapWrapper.set(this.propertyBindings, name, expression);\n    this.bindPropertySetter(name);\n  }\n  bindPropertySetter(name) {\n    MapWrapper.set(this.propertySetters, name, setterFactory(name));\n  }\n  bindVariable(name, value) {\n    if (isPresent(this.nestedProtoView)) {\n      this.nestedProtoView.bindVariable(name, value);\n    } else {\n      MapWrapper.set(this.variableBindings, value, name);\n    }\n  }\n  bindEvent(name, expression, target = null) {\n    ListWrapper.push(this.eventBindings, this.eventBuilder.add(name, expression, target));\n  }\n  bindText(index, expression) {\n    ListWrapper.push(this.textBindingIndices, index);\n    ListWrapper.push(this.textBindings, expression);\n  }\n  setContentTagSelector(value) {\n    this.contentTagSelector = value;\n  }\n  setComponentId(componentId) {\n    this.componentId = componentId;\n  }\n}\nObject.defineProperty(ElementBinderBuilder.prototype.setParent, \"parameters\", {get: function() {\n    return [[ElementBinderBuilder], []];\n  }});\nObject.defineProperty(ElementBinderBuilder.prototype.readAttribute, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(ElementBinderBuilder.prototype.bindDirective, \"parameters\", {get: function() {\n    return [[assert.type.number]];\n  }});\nObject.defineProperty(ElementBinderBuilder.prototype.setContentTagSelector, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(ElementBinderBuilder.prototype.setComponentId, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nexport class DirectiveBuilder {\n  constructor(directiveIndex) {\n    this.directiveIndex = directiveIndex;\n    this.propertyBindings = MapWrapper.create();\n    this.eventBindings = ListWrapper.create();\n    this.eventBuilder = new EventBuilder();\n  }\n  bindProperty(name, expression) {\n    MapWrapper.set(this.propertyBindings, name, expression);\n  }\n  bindEvent(name, expression, target = null) {\n    ListWrapper.push(this.eventBindings, this.eventBuilder.add(name, expression, target));\n  }\n}\nexport class EventBuilder extends AstTransformer {\n  constructor() {\n    super();\n    this.locals = [];\n    this.localEvents = [];\n    this.globalEvents = [];\n    this._implicitReceiver = new ImplicitReceiver();\n  }\n  add(name, source, target) {\n    var adjustedAst = source.ast;\n    var fullName = isPresent(target) ? target + EVENT_TARGET_SEPARATOR + name : name;\n    var result = new api.EventBinding(fullName, new ASTWithSource(adjustedAst, source.source, ''));\n    var event = new Event(name, target, fullName);\n    if (isBlank(target)) {\n      ListWrapper.push(this.localEvents, event);\n    } else {\n      ListWrapper.push(this.globalEvents, event);\n    }\n    return result;\n  }\n  visitAccessMember(ast) {\n    var isEventAccess = false;\n    var current = ast;\n    while (!isEventAccess && (current instanceof AccessMember)) {\n      if (current.name == '$event') {\n        isEventAccess = true;\n      }\n      current = current.receiver;\n    }\n    if (isEventAccess) {\n      ListWrapper.push(this.locals, ast);\n      var index = this.locals.length - 1;\n      return new AccessMember(this._implicitReceiver, `${index}`, (arr) => arr[index], null);\n    } else {\n      return ast;\n    }\n  }\n  buildEventLocals() {\n    return this.locals;\n  }\n  buildLocalEvents() {\n    return this.localEvents;\n  }\n  buildGlobalEvents() {\n    return this.globalEvents;\n  }\n  merge(eventBuilder) {\n    this._merge(this.localEvents, eventBuilder.localEvents);\n    this._merge(this.globalEvents, eventBuilder.globalEvents);\n    ListWrapper.concat(this.locals, eventBuilder.locals);\n  }\n  _merge(host, tobeAdded) {\n    var names = ListWrapper.create();\n    for (var i = 0; i < host.length; i++) {\n      ListWrapper.push(names, host[i].fullName);\n    }\n    for (var j = 0; j < tobeAdded.length; j++) {\n      if (!ListWrapper.contains(names, tobeAdded[j].fullName)) {\n        ListWrapper.push(host, tobeAdded[j]);\n      }\n    }\n  }\n}\nObject.defineProperty(EventBuilder.prototype.add, \"parameters\", {get: function() {\n    return [[assert.type.string], [ASTWithSource], [assert.type.string]];\n  }});\nObject.defineProperty(EventBuilder.prototype.visitAccessMember, \"parameters\", {get: function() {\n    return [[AccessMember]];\n  }});\nObject.defineProperty(EventBuilder.prototype.merge, \"parameters\", {get: function() {\n    return [[EventBuilder]];\n  }});\nObject.defineProperty(EventBuilder.prototype._merge, \"parameters\", {get: function() {\n    return [[assert.genericType(List, Event)], [assert.genericType(List, Event)]];\n  }});\n//# sourceMappingURL=proto_view_builder.js.map\n\n//# sourceMappingURL=./proto_view_builder.map"]}