{"version":3,"sources":["dynamic_component_loader.es6"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,4SAAoB,UAAS,SAAQ;;;;;;;;;;;;;;;;;;;;;AAApD,OAAO;AACD,UAAM,GADZ,SAAS,IAAG;AAAZ,UAAoB,KAAG,IAAkB,CAAC;AAA1C,eAAoB,KAAG,SAAkB,CAAC;AAA1C,iBAAoB,KAAG,WAAkB,CAAC;AAA1C,sBAAoB,KAAG,gBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,eAAoB,KAAG,SAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,8BAAoB,KAAG,wBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,WAAoB,KAAG,KAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,cAAoB,KAAG,QAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,gBAAoB,KAAG,UAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,kBAAoB,KAAG,YAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,eAAoB,KAAG,SAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,iBAAoB,KAAG,WAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,cAAoB,KAAG,QAAkB,CAAC;IAElC,CADuB;AACzB,UAAM;mBAFY,CAAA,SAAQ,AAAC,kBAAjC,SAAS,AAAD,CAAG;AACD,AAAI,UAAA,eAgBP,SAAM,aAAW,CACV,QAAO,CAAG,CAAA,QAAO,CAAG,CAAA,aAAY,CAAG;AAC7C,aAAG,SAAS,EAAI,SAAO,CAAC;AACxB,aAAG,SAAS,EAAI,SAAO,CAAC;AACxB,aAAG,cAAc,EAAI,cAAY,CAAC;QACpC,AArBgD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AAqB5C,YAAI,SAAO,EAAI;AACb,iBAAO,CAAA,IAAG,SAAS,SAAS,CAAC;UAC/B;AACA,YAAI,SAAO,EAAI;AACb,iBAAO,CAAA,IAAG,SAAS,SAAS,CAAC;UAC/B;AAAA,aAzB8D,CAAC;MACzD,AAAC,EAAC,EAJ4D;AA8BtE,WAAK,eAAe,AAAC,CAAC,YAAW,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAC/D,eAAO,EAAC,CAAC,UAAS,CAAC,CAAG,EAAC,MAAK,KAAK,IAAI,CAAC,CAAG,EAAC,OAAM,CAAC,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;6BAhCmB,CAAA,SAAQ,AAAC,4BAAjC,SAAS,AAAD;AACE,AAAI,UAAA,yBAgCP,SAAM,uBAAqB,CACpB,QAAO,CAAG,CAAA,uBAAsB,CAAG,CAAA,QAAO,CAAG,CAAA,WAAU,CAAG;AACpE,aAAG,UAAU,EAAI,SAAO,CAAC;AACzB,aAAG,yBAAyB,EAAI,wBAAsB,CAAC;AACvD,aAAG,UAAU,EAAI,SAAO,CAAC;AACzB,aAAG,aAAa,EAAI,YAAU,CAAC;QACjC,AAtCgD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AAsC5C,iCAAuB,CAAvB,UAAyB,IAAG,CAAG,CAAA,QAAO,AAAiB;cAAd,SAAO,6CAAI,KAAG;;AACrD,eAAG,uBAAuB,AAAC,CAAC,IAAG,CAAC,CAAC;AACjC,AAAI,cAAA,CAAA,iBAAgB,EAAI,CAAA,IAAG,yBAAyB,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC;AAChE,AAAI,cAAA,CAAA,GAAE,EAAI,CAAA,IAAG,sBAAsB,AAAC,CAAC,QAAO,CAAG,SAAO,CAAG,CAAA,iBAAgB,oBAAoB,CAAC,CAAC;AAC/F,AAAI,cAAA,CAAA,MAAK,EAAI,CAAA,QAAO,gBAAgB,CAAC;AACrC,AAAI,cAAA,CAAA,QAAO,EAAI,CAAA,QAAO,SAAS,CAAC;AAChC,iBAAO,CAAA,IAAG,UAAU,QAAQ,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,EAAC,SAAC,kBAAiB,CAAM;AAC/D,AAAI,gBAAA,CAAA,SAAQ,EAAI,CAAA,MAAK,2BAA2B,AAAC,CAAC,IAAG,CAAG,CAAA,iBAAgB,WAAW,CAAG,IAAE,CAAC,CAAC;AAC1F,AAAI,gBAAA,CAAA,aAAY,EAAI,CAAA,+BAA8B,AAAC,CAAC,kBAAiB,CAAG,SAAO,CAAG,OAAK,CAAG,UAAQ,CAAC,CAAC;AACpG,qBAAO,sBAAsB,AAAC,CAAC,aAAY,CAAC,CAAC;AAC7C,2BAAa,wBAAwB,AAAC,CAAC,QAAO,OAAO,CAAG,CAAA,QAAO,kBAAkB,CAAG,CAAA,aAAY,OAAO,CAAC,CAAC;AACzG,mBAAO,IAAI,aAAW,AAAC,CAAC,QAAO,CAAG,UAAQ,CAAG,cAAY,CAAC,CAAC;YAC7D,EAAC,CAAC;UACJ;AACA,4BAAkB,CAAlB,UAAoB,iBAAgB,CAAG,CAAA,IAAG,CAAG,CAAA,QAAO,AAAiB;cAAd,SAAO,6CAAI,KAAG;;AACnE,eAAG,uBAAuB,AAAC,CAAC,IAAG,CAAC,CAAC;AACjC,AAAI,cAAA,CAAA,GAAE,EAAI,CAAA,IAAG,sBAAsB,AAAC,CAAC,QAAO,CAAG,SAAO,CAAG,KAAG,CAAC,CAAC;AAC9D,iBAAO,CAAA,IAAG,UAAU,YAAY,AAAC,CAAC,iBAAgB,CAAG,KAAG,CAAC,KAAK,AAAC,EAAC,SAAC,EAAC,CAAM;AACtE,AAAI,gBAAA,CAAA,QAAO,EAAI,CAAA,+BAA8B,AAAC,CAAC,EAAC,CAAG,IAAE,CAAG,KAAG,CAAG,IAAI,OAAK,AAAC,EAAC,CAAC,CAAC;AAC3E,AAAI,gBAAA,CAAA,WAAU,EAAI,IAAI,WAAS,AAAC,CAAC,QAAO,iBAAiB,CAAE,CAAA,CAAC,CAAC,CAAC;AAC9D,AAAI,gBAAA,CAAA,SAAQ,EAAI,CAAA,QAAO,iBAAiB,CAAE,CAAA,CAAC,aAAa,AAAC,EAAC,CAAC;AAC3D,mBAAO,IAAI,aAAW,AAAC,CAAC,WAAU,CAAG,UAAQ,CAAG,CAAA,QAAO,oBAAoB,CAAE,CAAA,CAAC,CAAC,CAAC;YAClF,EAAC,CAAC;UACJ;AACA,8BAAoB,CAApB,UAAsB,QAAO,CAAG,CAAA,QAAO,CAAG,CAAA,gBAAe,CAAG;AAC1D,AAAI,cAAA,CAAA,GAAE,EAAI,CAAA,SAAQ,AAAC,CAAC,QAAO,CAAC,CAAA,CAAI,SAAO,EAAI,CAAA,QAAO,SAAS,CAAC;AAC5D,iBAAO,CAAA,SAAQ,AAAC,CAAC,gBAAe,CAAC,CAAA,CAAI,CAAA,GAAE,wBAAwB,AAAC,CAAC,gBAAe,CAAC,CAAA,CAAI,IAAE,CAAC;UAC1F;AACA,mCAAyB,CAAzB,UAA2B,SAAQ,CAAG,CAAA,QAAO,CAAG,CAAA,mBAAkB,CAAG,CAAA,OAAM,CAAG;AAC5E,AAAI,cAAA,CAAA,aAAY,EAAI,CAAA,IAAG,aAAa,QAAQ,AAAC,CAAC,SAAQ,CAAC,CAAC;AACxD,wBAAY,QAAQ,AAAC,CAAC,QAAO,CAAG,oBAAkB,CAAG,QAAM,CAAG,KAAG,CAAC,CAAC;AACnE,iBAAO,cAAY,CAAC;UACtB;AACA,+BAAqB,CAArB,UAAuB,IAAG,CAAG;AAC3B,AAAI,cAAA,CAAA,UAAS,EAAI,CAAA,IAAG,yBAAyB,KAAK,AAAC,CAAC,IAAG,CAAC,WAAW,CAAC;AACpE,eAAI,CAAC,CAAC,UAAS,WAAa,UAAQ,CAAC,CAAG;AACtC,kBAAM,IAAI,cAAY,AAAC,EAAC,kBAAkB,EAAC,CAAA,SAAQ,AAAC,CAAC,IAAG,CAAC,CAAA,CAAC,mCAAiC,EAAC,CAAC;YAC/F;AAAA,UACF;AAAA,aA3E8D,CAAC;MACzD,AAAC,EAAC,EAJ4D;AAgFtE,WAAK,eAAe,AAAC,CAAC,sBAAqB,CAAG,cAAY,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAC1E,eAAO,EAAC,GAAI,WAAS,AAAC,EAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,sBAAqB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AACzE,eAAO,EAAC,CAAC,QAAO,CAAC,CAAG,EAAC,uBAAsB,CAAC,CAAG,EAAC,QAAO,CAAC,CAAG,EAAC,WAAU,CAAC,CAAC,CAAC;QAC3E,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,sBAAqB,UAAU,yBAAyB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAC5G,eAAO,EAAC,CAAC,IAAG,CAAC,CAAG,EAAC,UAAS,CAAC,CAAG,EAAC,QAAO,CAAC,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,sBAAqB,UAAU,oBAAoB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AACvG,eAAO,EAAC,CAAC,MAAK,KAAK,IAAI,CAAC,CAAG,EAAC,IAAG,CAAC,CAAG,EAAC,UAAS,CAAC,CAAG,EAAC,QAAO,CAAC,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,sBAAqB,UAAU,sBAAsB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AACzG,eAAO,EAAC,EAAC,CAAG,EAAC,QAAO,CAAC,CAAG,EAAC,MAAK,YAAY,AAAC,CAAC,IAAG,CAAG,gBAAc,CAAC,CAAC,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,sBAAqB,UAAU,uBAAuB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAC1G,eAAO,EAAC,CAAC,IAAG,CAAC,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;IA/F0B;EAC3B,CAAA;AADI,CAAC,CAAC;AAkGwC","file":"angular2/src/core/compiler/dynamic_component_loader.js","sourcesContent":["import {Key,\n  Injector,\n  Injectable,\n  ResolvedBinding} from 'angular2/di';\nimport {Compiler} from './compiler';\nimport {DirectiveMetadataReader} from './directive_metadata_reader';\nimport {Type,\n  BaseException,\n  stringify,\n  isPresent} from 'angular2/src/facade/lang';\nimport {List} from 'angular2/src/facade/collection';\nimport {Promise} from 'angular2/src/facade/async';\nimport {Component} from 'angular2/src/core/annotations/annotations';\nimport {ViewFactory} from 'angular2/src/core/compiler/view_factory';\nimport {Renderer} from 'angular2/src/render/api';\nimport {ElementRef} from './element_injector';\nimport {AppView} from './view';\nexport class ComponentRef {\n  constructor(location, instance, componentView) {\n    this.location = location;\n    this.instance = instance;\n    this.componentView = componentView;\n  }\n  get injector() {\n    return this.location.injector;\n  }\n  get hostView() {\n    return this.location.hostView;\n  }\n}\nObject.defineProperty(ComponentRef, \"parameters\", {get: function() {\n    return [[ElementRef], [assert.type.any], [AppView]];\n  }});\nexport class DynamicComponentLoader {\n  constructor(compiler, directiveMetadataReader, renderer, viewFactory) {\n    this._compiler = compiler;\n    this._directiveMetadataReader = directiveMetadataReader;\n    this._renderer = renderer;\n    this._viewFactory = viewFactory;\n  }\n  loadIntoExistingLocation(type, location, injector = null) {\n    this._assertTypeIsComponent(type);\n    var directiveMetadata = this._directiveMetadataReader.read(type);\n    var inj = this._componentAppInjector(location, injector, directiveMetadata.resolvedInjectables);\n    var hostEi = location.elementInjector;\n    var hostView = location.hostView;\n    return this._compiler.compile(type).then((componentProtoView) => {\n      var component = hostEi.dynamicallyCreateComponent(type, directiveMetadata.annotation, inj);\n      var componentView = this._instantiateAndHydrateView(componentProtoView, injector, hostEi, component);\n      hostView.addComponentChildView(componentView);\n      this._renderer.setDynamicComponentView(hostView.render, location.boundElementIndex, componentView.render);\n      return new ComponentRef(location, component, componentView);\n    });\n  }\n  loadIntoNewLocation(elementOrSelector, type, location, injector = null) {\n    this._assertTypeIsComponent(type);\n    var inj = this._componentAppInjector(location, injector, null);\n    return this._compiler.compileRoot(elementOrSelector, type).then((pv) => {\n      var hostView = this._instantiateAndHydrateView(pv, inj, null, new Object());\n      var newLocation = new ElementRef(hostView.elementInjectors[0]);\n      var component = hostView.elementInjectors[0].getComponent();\n      return new ComponentRef(newLocation, component, hostView.componentChildViews[0]);\n    });\n  }\n  _componentAppInjector(location, injector, resolvedBindings) {\n    var inj = isPresent(injector) ? injector : location.injector;\n    return isPresent(resolvedBindings) ? inj.createChildFromResolved(resolvedBindings) : inj;\n  }\n  _instantiateAndHydrateView(protoView, injector, hostElementInjector, context) {\n    var componentView = this._viewFactory.getView(protoView);\n    componentView.hydrate(injector, hostElementInjector, context, null);\n    return componentView;\n  }\n  _assertTypeIsComponent(type) {\n    var annotation = this._directiveMetadataReader.read(type).annotation;\n    if (!(annotation instanceof Component)) {\n      throw new BaseException(`Could not load '${stringify(type)}' because it is not a component.`);\n    }\n  }\n}\nObject.defineProperty(DynamicComponentLoader, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(DynamicComponentLoader, \"parameters\", {get: function() {\n    return [[Compiler], [DirectiveMetadataReader], [Renderer], [ViewFactory]];\n  }});\nObject.defineProperty(DynamicComponentLoader.prototype.loadIntoExistingLocation, \"parameters\", {get: function() {\n    return [[Type], [ElementRef], [Injector]];\n  }});\nObject.defineProperty(DynamicComponentLoader.prototype.loadIntoNewLocation, \"parameters\", {get: function() {\n    return [[assert.type.any], [Type], [ElementRef], [Injector]];\n  }});\nObject.defineProperty(DynamicComponentLoader.prototype._componentAppInjector, \"parameters\", {get: function() {\n    return [[], [Injector], [assert.genericType(List, ResolvedBinding)]];\n  }});\nObject.defineProperty(DynamicComponentLoader.prototype._assertTypeIsComponent, \"parameters\", {get: function() {\n    return [[Type]];\n  }});\n//# sourceMappingURL=dynamic_component_loader.js.map\n\n//# sourceMappingURL=./dynamic_component_loader.map"]}