{"version":3,"sources":["json_file_reporter.js"],"names":[],"mappings":"AAAA,KAAO,EAAE,WAAU;AAAG,UAAQ;AAAG,QAAM;AAAG,KAAG,CAAE,KAAO,2BAAyB,CAAC;AAChF,KAAO,EAAE,IAAG,CAAE,KAAO,iCAA+B,CAAC;AACrD,KAAO,EAAE,OAAM;AAAG,eAAa,CAAE,KAAO,4BAA0B,CAAC;AAEnE,KAAO,EAAE,IAAG;AAAG,YAAU,CAAE,KAAO,cAAY,CAAC;AAE/C,KAAO,EAAE,QAAO,CAAE,KAAO,cAAY,CAAC;AACtC,KAAO,EAAE,iBAAgB,CAAE,KAAO,wBAAsB,CAAC;AACzD,KAAO,EAAE,aAAY,CAAE,KAAO,oBAAkB,CAAC;AACjD,KAAO,EAAE,OAAM,CAAE,KAAO,oBAAkB,CAAC;AAK3C,KAAO,MAAM,iBAAe,QAAU,SAAO;AAE3C,WAAW,KAAG,EAAI;AAAE,SAAO,MAAI,CAAC;EAAE;AAAA,AAClC,WAAW,SAAO,EAAI;AAAE,SAAO,UAAQ,CAAC;EAAE;AAAA,AAO1C,YAAU,CAAE,iBAAgB,CAAG,CAAA,IAAG,CAAG,CAAA,SAAQ,CAAG,CAAA,GAAE,CAAG;AACnD,QAAI,AAAC,EAAC,CAAC;AACP,OAAG,aAAa,EAAI,kBAAgB,CAAC;AACrC,OAAG,MAAM,EAAI,KAAG,CAAC;AACjB,OAAG,WAAW,EAAI,UAAQ,CAAC;AAC3B,OAAG,KAAK,EAAI,IAAE,CAAC;EACjB;AAAA,AAEA,oBAAkB,CAAE,aAAY,AAAc,CAAW;AACvD,SAAO,CAAA,cAAa,QAAQ,AAAC,CAAC,IAAG,CAAC,CAAC;EACrC;AAAA,AAEA,aAAW,CAAE,cAAa,AAAoB,CAAG,CAAA,WAAU,AAAoB,CAAW;AACxF,AAAI,MAAA,CAAA,OAAM,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC;AAC3B,kBAAY,CAAG,CAAA,IAAG,aAAa;AAC/B,qBAAe,CAAG,eAAa;AAC/B,kBAAY,CAAG,YAAU;AAAA,IAC3B,CAAC,CAAC;AACF,AAAI,MAAA,CAAA,QAAO,EAAI,IAAG,IAAG,MAAM,IAAK,IAAG,aAAa,GAAG,IAAK,WAAU,SAAS,AAAC,CAAC,IAAG,KAAK,AAAC,EAAC,CAAC,OAAO,CAAC;AAChG,SAAO,CAAA,IAAG,WAAW,AAAC,CAAC,QAAO,CAAG,QAAM,CAAC,CAAC;EAC3C;AAAA,AACF;AAAA,AA7CA,KAAK,eAAe,AAAC,8DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA+BU,aAAY,GA/BC;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,uDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAD1B,MAAK,YAAuB,AAoCE,CAAA,IAAG,CAAE,cAAY,CAAC,AApCD,IAA/C,MAAK,YAAuB,AAoCmC,CAAA,IAAG,CAAE,cAAY,CAAC,AApClC,GACE;EAAC,CAAC,CAAC,CAAC;AA8CrD,AAAI,EAAA,CAAA,KAAI,EAAI,IAAI,YAAU,AAAC,CAAC,uBAAsB,CAAC,CAAC;AACpD,AAAI,EAAA,CAAA,SAAQ,EAAI,EACd,IAAG,AAAC,CAAC,gBAAe,CAAC,UAAU,AAAC,CAC9B,CAAC,iBAAgB,CAAG,CAAA,IAAG,CAAG,CAAA,SAAQ,CAAG,CAAA,GAAE,IAAM,IAAI,iBAAe,AAAC,CAAC,iBAAgB,CAAG,KAAG,CAAG,UAAQ,CAAG,IAAE,CAAC,CACzG,EAAC,iBAAgB,CAAG,MAAI,CAAG,CAAA,OAAM,WAAW,CAAG,CAAA,OAAM,IAAI,CAAC,CAC5D,CACA,CAAA,IAAG,AAAC,CAAC,KAAI,CAAC,QAAQ,AAAC,CAAC,GAAE,CAAC,CACzB,CAAC;AACD","file":"benchpress/src/reporter/json_file_reporter.es6","sourcesContent":["import { DateWrapper, isPresent, isBlank, Json } from 'angular2/src/facade/lang';\nimport { List } from 'angular2/src/facade/collection';\nimport { Promise, PromiseWrapper } from 'angular2/src/facade/async';\n\nimport { bind, OpaqueToken } from 'angular2/di';\n\nimport { Reporter } from '../reporter';\nimport { SampleDescription } from '../sample_description';\nimport { MeasureValues } from '../measure_values';\nimport { Options } from '../common_options';\n\n/**\n * A reporter that writes results into a json file.\n */\nexport class JsonFileReporter extends Reporter {\n  // TODO(tbosch): use static values when our transpiler supports them\n  static get PATH() { return _PATH; }\n  static get BINDINGS() { return _BINDINGS; }\n\n  _writeFile:Function;\n  _path:string;\n  _description:SampleDescription;\n  _now:Function;\n\n  constructor(sampleDescription, path, writeFile, now) {\n    super();\n    this._description = sampleDescription;\n    this._path = path;\n    this._writeFile = writeFile;\n    this._now = now;\n  }\n\n  reportMeasureValues(measureValues:MeasureValues):Promise {\n    return PromiseWrapper.resolve(null);\n  }\n\n  reportSample(completeSample:List<MeasureValues>, validSample:List<MeasureValues>):Promise {\n    var content = Json.stringify({\n      'description': this._description,\n      'completeSample': completeSample,\n      'validSample': validSample\n    });\n    var filePath = `${this._path}/${this._description.id}_${DateWrapper.toMillis(this._now())}.json`;\n    return this._writeFile(filePath, content);\n  }\n}\n\nvar _PATH = new OpaqueToken('JsonFileReporter.path');\nvar _BINDINGS = [\n  bind(JsonFileReporter).toFactory(\n    (sampleDescription, path, writeFile, now) => new JsonFileReporter(sampleDescription, path, writeFile, now),\n    [SampleDescription, _PATH, Options.WRITE_FILE, Options.NOW]\n  ),\n  bind(_PATH).toValue('.')\n];\n"]}