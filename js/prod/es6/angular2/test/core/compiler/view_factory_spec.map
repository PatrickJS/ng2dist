{"version":3,"sources":["view_factory_spec.js"],"names":[],"mappings":"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","file":"angular2/test/core/compiler/view_factory_spec.es6","sourcesContent":["import {describe, ddescribe, it, iit, xit, xdescribe, expect, beforeEach, el} from 'angular2/test_lib';\n\nimport {ViewFactory} from 'angular2/src/core/compiler/view_factory';\nimport {AppProtoView, AppView} from 'angular2/src/core/compiler/view';\nimport {dynamicChangeDetection} from 'angular2/change_detection';\n\nexport function main() {\n  function createViewFactory({capacity}):ViewFactory {\n    return new ViewFactory(capacity);\n  }\n\n  function createPv() {\n    return new AppProtoView(null,\n      null,\n      dynamicChangeDetection.createProtoChangeDetector('dummy', null));\n  }\n\n  describe('RenderViewFactory', () => {\n    it('should create views', () => {\n      var pv = createPv();\n      var vf = createViewFactory({\n        capacity: 1\n      });\n      expect(vf.getView(pv) instanceof AppView).toBe(true);\n    });\n\n    describe('caching', () => {\n\n      it('should support multiple AppProtoViews', () => {\n        var pv1 = createPv();\n        var pv2 = createPv();\n        var vf = createViewFactory({ capacity: 2 });\n        var view1 = vf.getView(pv1);\n        var view2 = vf.getView(pv2);\n        vf.returnView(view1);\n        vf.returnView(view2);\n\n        expect(vf.getView(pv1)).toBe(view1);\n        expect(vf.getView(pv2)).toBe(view2);\n      });\n\n      it('should reuse the newest view that has been returned', () => {\n        var pv = createPv();\n        var vf = createViewFactory({ capacity: 2 });\n        var view1 = vf.getView(pv);\n        var view2 = vf.getView(pv);\n        vf.returnView(view1);\n        vf.returnView(view2);\n\n        expect(vf.getView(pv)).toBe(view2);\n      });\n\n      it('should not add views when the capacity has been reached', () => {\n        var pv = createPv();\n        var vf = createViewFactory({ capacity: 2 });\n        var view1 = vf.getView(pv);\n        var view2 = vf.getView(pv);\n        var view3 = vf.getView(pv);\n        vf.returnView(view1);\n        vf.returnView(view2);\n        vf.returnView(view3);\n\n        expect(vf.getView(pv)).toBe(view2);\n        expect(vf.getView(pv)).toBe(view1);\n      });\n\n    });\n\n  });\n}\n"]}