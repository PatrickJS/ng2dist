{"version":3,"sources":["directives.es6"],"names":[],"mappings":"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","file":"angular2/src/forms/directives.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {View,\n  Component,\n  Decorator,\n  Ancestor,\n  onChange,\n  PropertySetter} from 'angular2/angular2';\nimport {Optional} from 'angular2/di';\nimport {isBlank,\n  isPresent,\n  isString,\n  CONST} from 'angular2/src/facade/lang';\nimport {StringMapWrapper,\n  ListWrapper} from 'angular2/src/facade/collection';\nimport {ControlGroup,\n  Control} from './model';\nimport {Validators} from './validators';\nexport class DefaultValueAccessor {\n  constructor(setValueProperty) {\n    assert.argumentTypes(setValueProperty, Function);\n    this._setValueProperty = setValueProperty;\n    this.onChange = (_) => {};\n  }\n  writeValue(value) {\n    this._setValueProperty(value);\n  }\n}\nObject.defineProperty(DefaultValueAccessor, \"annotations\", {get: function() {\n    return [new Decorator({\n      selector: '[control]',\n      hostListeners: {\n        'change': 'onChange($event.target.value)',\n        'input': 'onChange($event.target.value)'\n      }\n    })];\n  }});\nObject.defineProperty(DefaultValueAccessor, \"parameters\", {get: function() {\n    return [[Function, new PropertySetter('value')]];\n  }});\nexport class CheckboxControlValueAccessor {\n  constructor(cd, setCheckedProperty) {\n    assert.argumentTypes(cd, ControlDirective, setCheckedProperty, Function);\n    this._setCheckedProperty = setCheckedProperty;\n    this.onChange = (_) => {};\n    cd.valueAccessor = this;\n  }\n  writeValue(value) {\n    this._setCheckedProperty(value);\n  }\n}\nObject.defineProperty(CheckboxControlValueAccessor, \"annotations\", {get: function() {\n    return [new Decorator({\n      selector: 'input[type=checkbox][control]',\n      hostListeners: {'change': 'onChange($event.target.checked)'}\n    })];\n  }});\nObject.defineProperty(CheckboxControlValueAccessor, \"parameters\", {get: function() {\n    return [[ControlDirective], [Function, new PropertySetter('checked')]];\n  }});\nexport class ControlDirective {\n  constructor(groupDirective, valueAccessor) {\n    assert.argumentTypes(groupDirective, ControlGroupDirective, valueAccessor, DefaultValueAccessor);\n    this._groupDirective = groupDirective;\n    this.controlOrName = null;\n    this.valueAccessor = valueAccessor;\n    this.validator = Validators.nullValidator;\n  }\n  onChange(_) {\n    this._initialize();\n  }\n  _initialize() {\n    if (isPresent(this._groupDirective)) {\n      this._groupDirective.addDirective(this);\n    }\n    var c = this._control();\n    c.validator = Validators.compose([c.validator, this.validator]);\n    this._updateDomValue();\n    this._setUpUpdateControlValue();\n  }\n  _updateDomValue() {\n    this.valueAccessor.writeValue(this._control().value);\n  }\n  _setUpUpdateControlValue() {\n    this.valueAccessor.onChange = (newValue) => this._control().updateValue(newValue);\n  }\n  _control() {\n    if (isString(this.controlOrName)) {\n      return this._groupDirective.findControl(this.controlOrName);\n    } else {\n      return this.controlOrName;\n    }\n  }\n}\nObject.defineProperty(ControlDirective, \"annotations\", {get: function() {\n    return [new Decorator({\n      lifecycle: [onChange],\n      selector: '[control]',\n      properties: {'controlOrName': 'control'}\n    })];\n  }});\nObject.defineProperty(ControlDirective, \"parameters\", {get: function() {\n    return [[ControlGroupDirective, new Optional(), new Ancestor()], [DefaultValueAccessor]];\n  }});\nexport class ControlGroupDirective {\n  constructor(groupDirective) {\n    assert.argumentTypes(groupDirective, ControlGroupDirective);\n    this._groupDirective = groupDirective;\n    this._directives = ListWrapper.create();\n  }\n  set controlGroup(controlGroup) {\n    if (isString(controlGroup)) {\n      this._controlGroupName = controlGroup;\n    } else {\n      this._controlGroup = controlGroup;\n    }\n    this._updateDomValue();\n  }\n  _updateDomValue() {\n    ListWrapper.forEach(this._directives, (cd) => cd._updateDomValue());\n  }\n  addDirective(c) {\n    assert.argumentTypes(c, ControlDirective);\n    ListWrapper.push(this._directives, c);\n  }\n  findControl(name) {\n    assert.argumentTypes(name, assert.type.string);\n    return assert.returnType((this._getControlGroup().controls[name]), assert.type.any);\n  }\n  _getControlGroup() {\n    if (isPresent(this._controlGroupName)) {\n      return assert.returnType((this._groupDirective.findControl(this._controlGroupName)), ControlGroup);\n    } else {\n      return assert.returnType((this._controlGroup), ControlGroup);\n    }\n  }\n}\nObject.defineProperty(ControlGroupDirective, \"annotations\", {get: function() {\n    return [new Decorator({\n      selector: '[control-group]',\n      properties: {'controlGroup': 'control-group'}\n    })];\n  }});\nObject.defineProperty(ControlGroupDirective, \"parameters\", {get: function() {\n    return [[ControlGroupDirective, new Optional(), new Ancestor()]];\n  }});\nObject.defineProperty(ControlGroupDirective.prototype.addDirective, \"parameters\", {get: function() {\n    return [[ControlDirective]];\n  }});\nObject.defineProperty(ControlGroupDirective.prototype.findControl, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nexport var FormDirectives = [ControlGroupDirective, ControlDirective, CheckboxControlValueAccessor, DefaultValueAccessor];\n//# sourceMappingURL=directives.js.map\n\n//# sourceMappingURL=./directives.map"]}