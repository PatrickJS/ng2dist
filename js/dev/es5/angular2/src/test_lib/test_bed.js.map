{"version":3,"sources":["test_bed.es6"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,odAAoB,UAAS,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;AAApD,OAAO;AACD,UAAM,GADZ,SAAS,IAAG,CAAG;AAAf,aAAoB,KAAG,OAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,eAAoB,KAAG,SAAkB,CAAC;AAA1C,WAAoB,KAAG,KAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;AAA1C,cAAoB,KAAG,QAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,cAAoB,KAAG,QAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,WAAoB,KAAG,KAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,WAAoB,KAAG,KAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,uBAAoB,KAAG,iBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,eAAoB,KAAG,SAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,cAAoB,KAAG,QAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,kBAAoB,KAAG,YAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,uBAAoB,KAAG,iBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,8BAAoB,KAAG,wBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;AAA1C,SAAoB,KAAG,GAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,sBAAoB,KAAG,gBAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;IAElC,CADuB;AACzB,UAAM;cAFY,CAAA,SAAQ,AAAC,aAAjC,SAAS,AAAD;AACE,AAAI,UAAA,UAoBP,SAAM,QAAM,CACL,QAAO,CAAG;AACpB,eAAK,cAAc,AAAC,CAAC,QAAO,CAAG,SAAO,CAAC,CAAC;AACxC,aAAG,UAAU,EAAI,SAAO,CAAC;QAC3B,AAxBgD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AAwB5C,qBAAW,CAAX,UAAa,SAAQ,CAAG,CAAA,QAAO,CAAG;AAChC,iBAAK,cAAc,AAAC,CAAC,SAAQ,CAAG,KAAG,CAAG,SAAO,CAAG,KAAG,CAAC,CAAC;AACrD,eAAG,UAAU,IAAI,AAAC,CAAC,gBAAe,CAAC,QAAQ,AAAC,CAAC,SAAQ,CAAG,SAAO,CAAC,CAAC;UACnE;AACA,0BAAgB,CAAhB,UAAkB,SAAQ,CAAG,CAAA,IAAG,CAAG;AACjC,iBAAK,cAAc,AAAC,CAAC,SAAQ,CAAG,KAAG,CAAG,KAAG,CAAG,CAAA,MAAK,KAAK,OAAO,CAAC,CAAC;AAC/D,eAAG,UAAU,IAAI,AAAC,CAAC,gBAAe,CAAC,kBAAkB,AAAC,CAAC,SAAQ,CAAG,KAAG,CAAC,CAAC;UACzE;AACA,0BAAgB,CAAhB,UAAkB,SAAQ,CAAG,CAAA,IAAG,CAAG,CAAA,EAAC,CAAG;AACrC,iBAAK,cAAc,AAAC,CAAC,SAAQ,CAAG,KAAG,CAAG,KAAG,CAAG,KAAG,CAAG,GAAC,CAAG,KAAG,CAAC,CAAC;AAC3D,eAAG,UAAU,IAAI,AAAC,CAAC,gBAAe,CAAC,0BAA0B,AAAC,CAAC,SAAQ,CAAG,KAAG,CAAG,GAAC,CAAC,CAAC;UACrF;AACA,mBAAS,CAAT,UAAW,SAAQ,AACD;;;gEAAD,GAAC;AADK,sBAAM,EAtC/B,CAAA,CAAC,mBAAsD,CAAC,IAAM,KAAK,EAAA,CAAA,CAsChC,KAAG,OArCM;AAsCxC,mBAAG,EAvCP,CAAA,CAAC,gBAAsD,CAAC,IAAM,KAAK,EAAA,CAAA,CAuCxD,KAAG,OAtC8B;;AAuCxC,iBAAK,cAAc,AAAC,CAAC,SAAQ,CAAG,KAAG,CAAC,CAAC;AACrC,eAAI,OAAM,AAAC,CAAC,SAAQ,CAAC,CAAA,EAAK,CAAA,OAAM,AAAC,CAAC,OAAM,CAAC,CAAG;AAC1C,kBAAM,IAAI,cAAY,AAAC,CAAC,sDAAqD,CAAC,CAAC;YACjF;AAAA,AACA,eAAI,OAAM,AAAC,CAAC,SAAQ,CAAC,CAAG;AACtB,sBAAQ,EAAI,CAAA,SAAQ,AAAC,CAAC,OAAM,CAAC,CAAC;YAChC,KAAO,KAAI,OAAM,AAAC,CAAC,OAAM,CAAC,CAAG;AAC3B,oBAAM,EAAI,CAAA,eAAc,AAAC,CAAC,SAAQ,CAAC,CAAC;YACtC;AAAA,AACA,eAAI,SAAQ,AAAC,CAAC,IAAG,CAAC,CAAG;AACnB,iBAAG,kBAAkB,AAAC,CAAC,SAAQ,CAAG,KAAG,CAAC,CAAC;YACzC;AAAA,AACI,cAAA,CAAA,MAAK,EAAI,CAAA,EAAC,AAAC,CAAC,aAAY,CAAC,CAAC;AAC9B,AAAI,cAAA,CAAA,cAAa,EAAI,CAAA,IAAG,UAAU,IAAI,AAAC,CAAC,uBAAsB,CAAC,CAAC;AAChE,AAAI,cAAA,CAAA,gBAAe,EAAI,CAAA,gBAAe,kBAAkB,AAAC,CAAC,IAAG,AAAC,CAAC,SAAQ,CAAC,QAAQ,AAAC,CAAC,OAAM,CAAC,CAAG,CAAA,cAAa,KAAK,AAAC,CAAC,SAAQ,CAAC,WAAW,CAAC,CAAC;AACtI,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CAAC,IAAG,UAAU,IAAI,AAAC,CAAC,QAAO,CAAC,YAAY,AAAC,CAAC,MAAK,CAAG,iBAAe,CAAC,KAAK,AAAC,EAAC,SAAC,EAAC,CAAM;AACxG,AAAI,gBAAA,CAAA,WAAU,EAAI,CAAA,cAAa,IAAI,AAAC,CAAC,WAAU,CAAC,CAAC;AACjD,AAAI,gBAAA,CAAA,IAAG,EAAI,CAAA,WAAU,QAAQ,AAAC,CAAC,EAAC,CAAC,CAAC;AAClC,iBAAG,QAAQ,AAAC,CAAC,cAAa,CAAG,KAAG,CAAG,QAAM,CAAG,KAAG,CAAC,CAAC;AACjD,mBAAO,IAAI,UAAQ,AAAC,CAAC,IAAG,oBAAoB,CAAE,CAAA,CAAC,CAAC,CAAC;YACnD,EAAC,CAAC,CAAG,CAAA,MAAK,YAAY,AAAC,CAAC,OAAM,CAAG,QAAM,CAAC,CAAC,CAAC;UAC5C;aA1D8D,CAAC;MACzD,AAAC,EAAC,EAJ4D;AA+DtE,WAAK,eAAe,AAAC,CAAC,OAAM,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAC1D,eAAO,EAAC,CAAC,QAAO,CAAC,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,OAAM,UAAU,aAAa,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AACjF,eAAO,EAAC,CAAC,IAAG,CAAC,CAAG,EAAC,IAAG,CAAC,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,OAAM,UAAU,kBAAkB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AACtF,eAAO,EAAC,CAAC,IAAG,CAAC,CAAG,EAAC,MAAK,KAAK,OAAO,CAAC,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,OAAM,UAAU,kBAAkB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AACtF,eAAO,EAAC,CAAC,IAAG,CAAC,CAAG,EAAC,IAAG,CAAC,CAAG,EAAC,IAAG,CAAC,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,OAAM,UAAU,WAAW,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAC/E,eAAO,EAAC,CAAC,IAAG,CAAC,CAAG,GAAC,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;gBA7EmB,CAAA,SAAQ,AAAC,eAAjC,SAAS,AAAD;AACE,AAAI,UAAA,YA6EP,SAAM,UAAQ,CACP,IAAG,CAAG;AAChB,eAAK,cAAc,AAAC,CAAC,IAAG,CAAG,QAAM,CAAC,CAAC;AACnC,aAAG,MAAM,EAAI,KAAG,CAAC;QACnB,AAjFgD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AAiF5C,YAAI,QAAM,EAAI;AACZ,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CAAC,IAAG,MAAM,QAAQ,CAAC,CAAG,CAAA,MAAK,KAAK,IAAI,CAAC,CAAC;UACjE;AACA,YAAI,UAAQ,EAAI;AACd,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CAAC,aAAY,AAAC,CAAC,IAAG,MAAM,CAAC,CAAC,CAAG,KAAG,CAAC,CAAC;UAC7D;AACA,sBAAY,CAAZ,UAAc,AAAD,CAAG;AACd,eAAG,MAAM,eAAe,cAAc,AAAC,EAAC,CAAC;UAC3C;AACA,sBAAY,CAAZ,UAAc,QAAO,CAAG;AACtB,iBAAO,CAAA,SAAQ,AAAC,CAAC,IAAG,MAAM,CAAG,SAAO,CAAC,CAAC;UACxC;AACA,YAAI,QAAM,EAAI;AACZ,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CAAC,IAAG,MAAM,CAAC,CAAG,QAAM,CAAC,CAAC;UACjD;AAAA,aA9F8D,CAAC;MACzD,AAAC,EAAC,EAJ4D;AAmGtE,WAAK,eAAe,AAAC,CAAC,SAAQ,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAC5D,eAAO,EAAC,CAAC,OAAM,CAAC,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IAnG0B;EAC3B,CAAA;AADI,CAAC,CAAC;AAsGwB","file":"angular2/src/test_lib/test_bed.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {Injector,\n  bind} from 'angular2/di';\nimport {Type,\n  isPresent,\n  BaseException} from 'angular2/src/facade/lang';\nimport {Promise} from 'angular2/src/facade/async';\nimport {isBlank} from 'angular2/src/facade/lang';\nimport {List} from 'angular2/src/facade/collection';\nimport {View} from 'angular2/src/core/annotations/view';\nimport {TemplateResolver} from 'angular2/src/core/compiler/template_resolver';\nimport {Compiler} from 'angular2/src/core/compiler/compiler';\nimport {AppView} from 'angular2/src/core/compiler/view';\nimport {ViewFactory} from 'angular2/src/core/compiler/view_factory';\nimport {DirectiveBinding} from 'angular2/src/core/compiler/element_injector';\nimport {DirectiveMetadataReader} from 'angular2/src/core/compiler/directive_metadata_reader';\nimport {queryView,\n  viewRootNodes,\n  el} from './utils';\nimport {instantiateType,\n  getTypeOf} from './lang_utils';\nexport class TestBed {\n  constructor(injector) {\n    assert.argumentTypes(injector, Injector);\n    this._injector = injector;\n  }\n  overrideView(component, template) {\n    assert.argumentTypes(component, Type, template, View);\n    this._injector.get(TemplateResolver).setView(component, template);\n  }\n  setInlineTemplate(component, html) {\n    assert.argumentTypes(component, Type, html, assert.type.string);\n    this._injector.get(TemplateResolver).setInlineTemplate(component, html);\n  }\n  overrideDirective(component, from, to) {\n    assert.argumentTypes(component, Type, from, Type, to, Type);\n    this._injector.get(TemplateResolver).overrideTemplateDirective(component, from, to);\n  }\n  createView(component, {context = null,\n    html = null} = {}) {\n    assert.argumentTypes(component, Type);\n    if (isBlank(component) && isBlank(context)) {\n      throw new BaseException('You must specified at least a component or a context');\n    }\n    if (isBlank(component)) {\n      component = getTypeOf(context);\n    } else if (isBlank(context)) {\n      context = instantiateType(component);\n    }\n    if (isPresent(html)) {\n      this.setInlineTemplate(component, html);\n    }\n    var rootEl = el('<div></div>');\n    var metadataReader = this._injector.get(DirectiveMetadataReader);\n    var componentBinding = DirectiveBinding.createFromBinding(bind(component).toValue(context), metadataReader.read(component).annotation);\n    return assert.returnType((this._injector.get(Compiler).compileRoot(rootEl, componentBinding).then((pv) => {\n      var viewFactory = this._injector.get(ViewFactory);\n      var view = viewFactory.getView(pv);\n      view.hydrate(this._injector, null, context, null);\n      return new ViewProxy(view.componentChildViews[0]);\n    })), assert.genericType(Promise, AppView));\n  }\n}\nObject.defineProperty(TestBed, \"parameters\", {get: function() {\n    return [[Injector]];\n  }});\nObject.defineProperty(TestBed.prototype.overrideView, \"parameters\", {get: function() {\n    return [[Type], [View]];\n  }});\nObject.defineProperty(TestBed.prototype.setInlineTemplate, \"parameters\", {get: function() {\n    return [[Type], [assert.type.string]];\n  }});\nObject.defineProperty(TestBed.prototype.overrideDirective, \"parameters\", {get: function() {\n    return [[Type], [Type], [Type]];\n  }});\nObject.defineProperty(TestBed.prototype.createView, \"parameters\", {get: function() {\n    return [[Type], []];\n  }});\nexport class ViewProxy {\n  constructor(view) {\n    assert.argumentTypes(view, AppView);\n    this._view = view;\n  }\n  get context() {\n    return assert.returnType((this._view.context), assert.type.any);\n  }\n  get rootNodes() {\n    return assert.returnType((viewRootNodes(this._view)), List);\n  }\n  detectChanges() {\n    this._view.changeDetector.detectChanges();\n  }\n  querySelector(selector) {\n    return queryView(this._view, selector);\n  }\n  get rawView() {\n    return assert.returnType((this._view), AppView);\n  }\n}\nObject.defineProperty(ViewProxy, \"parameters\", {get: function() {\n    return [[AppView]];\n  }});\n//# sourceMappingURL=test_bed.js.map\n\n//# sourceMappingURL=./test_bed.map"]}