{"version":3,"sources":["shadow_dom_compile_step.es6"],"names":[],"mappings":"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","file":"angular2/src/render/dom/shadow_dom/shadow_dom_compile_step.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {isBlank,\n  isPresent,\n  assertionsEnabled} from 'angular2/src/facade/lang';\nimport {MapWrapper,\n  List,\n  ListWrapper} from 'angular2/src/facade/collection';\nimport {Promise,\n  PromiseWrapper} from 'angular2/src/facade/async';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {CompileStep} from '../compiler/compile_step';\nimport {CompileElement} from '../compiler/compile_element';\nimport {CompileControl} from '../compiler/compile_control';\nimport {ViewDefinition} from '../../api';\nimport {ShadowDomStrategy} from './shadow_dom_strategy';\nexport class ShadowDomCompileStep extends CompileStep {\n  constructor(shadowDomStrategy, template, subTaskPromises) {\n    assert.argumentTypes(shadowDomStrategy, ShadowDomStrategy, template, ViewDefinition, subTaskPromises, assert.genericType(List, Promise));\n    super();\n    this._shadowDomStrategy = shadowDomStrategy;\n    this._template = template;\n    this._subTaskPromises = subTaskPromises;\n  }\n  process(parent, current, control) {\n    assert.argumentTypes(parent, CompileElement, current, CompileElement, control, CompileControl);\n    var tagName = DOM.tagName(current.element).toUpperCase();\n    if (tagName == 'STYLE') {\n      this._processStyleElement(current, control);\n    } else if (tagName == 'CONTENT') {\n      this._processContentElement(current);\n    } else {\n      var componentId = current.isBound() ? current.inheritedElementBinder.componentId : null;\n      this._shadowDomStrategy.processElement(this._template.componentId, componentId, current.element);\n    }\n  }\n  _processStyleElement(current, control) {\n    assert.argumentTypes(current, CompileElement, control, CompileControl);\n    var stylePromise = this._shadowDomStrategy.processStyleElement(this._template.componentId, this._template.absUrl, current.element);\n    if (isPresent(stylePromise) && PromiseWrapper.isPromise(stylePromise)) {\n      ListWrapper.push(this._subTaskPromises, stylePromise);\n    }\n    control.ignoreCurrentElement();\n  }\n  _processContentElement(current) {\n    assert.argumentTypes(current, CompileElement);\n    if (this._shadowDomStrategy.hasNativeContentElement()) {\n      return ;\n    }\n    var attrs = current.attrs();\n    var selector = MapWrapper.get(attrs, 'select');\n    selector = isPresent(selector) ? selector : '';\n    var contentStart = DOM.createScriptTag('type', 'ng/contentStart');\n    if (assertionsEnabled()) {\n      DOM.setAttribute(contentStart, 'select', selector);\n    }\n    var contentEnd = DOM.createScriptTag('type', 'ng/contentEnd');\n    DOM.insertBefore(current.element, contentStart);\n    DOM.insertBefore(current.element, contentEnd);\n    DOM.remove(current.element);\n    current.element = contentStart;\n    current.bindElement().setContentTagSelector(selector);\n  }\n}\nObject.defineProperty(ShadowDomCompileStep, \"parameters\", {get: function() {\n    return [[ShadowDomStrategy], [ViewDefinition], [assert.genericType(List, Promise)]];\n  }});\nObject.defineProperty(ShadowDomCompileStep.prototype.process, \"parameters\", {get: function() {\n    return [[CompileElement], [CompileElement], [CompileControl]];\n  }});\nObject.defineProperty(ShadowDomCompileStep.prototype._processStyleElement, \"parameters\", {get: function() {\n    return [[CompileElement], [CompileControl]];\n  }});\nObject.defineProperty(ShadowDomCompileStep.prototype._processContentElement, \"parameters\", {get: function() {\n    return [[CompileElement]];\n  }});\n//# sourceMappingURL=shadow_dom_compile_step.js.map\n\n//# sourceMappingURL=./shadow_dom_compile_step.map"]}