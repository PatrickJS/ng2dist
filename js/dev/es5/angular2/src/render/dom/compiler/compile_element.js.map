{"version":3,"sources":["compile_element.es6"],"names":[],"mappings":"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","file":"angular2/src/render/dom/compiler/compile_element.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {List,\n  Map,\n  ListWrapper,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {int,\n  isBlank,\n  isPresent,\n  Type,\n  StringJoiner,\n  assertionsEnabled} from 'angular2/src/facade/lang';\nimport {ProtoViewBuilder,\n  ElementBinderBuilder} from '../view/proto_view_builder';\nexport class CompileElement {\n  constructor(element, compilationUnit = '') {\n    this.element = element;\n    this._attrs = null;\n    this._classList = null;\n    this.isViewRoot = false;\n    this.inheritedProtoView = null;\n    this.inheritedElementBinder = null;\n    this.distanceToInheritedBinder = 0;\n    this.compileChildren = true;\n    var tplDesc = assertionsEnabled() ? getElementDescription(element) : null;\n    if (compilationUnit !== '') {\n      this.elementDescription = compilationUnit;\n      if (isPresent(tplDesc))\n        this.elementDescription += \": \" + tplDesc;\n    } else {\n      this.elementDescription = tplDesc;\n    }\n  }\n  isBound() {\n    return isPresent(this.inheritedElementBinder) && this.distanceToInheritedBinder === 0;\n  }\n  bindElement() {\n    if (!this.isBound()) {\n      var parentBinder = this.inheritedElementBinder;\n      this.inheritedElementBinder = this.inheritedProtoView.bindElement(this.element, this.elementDescription);\n      if (isPresent(parentBinder)) {\n        this.inheritedElementBinder.setParent(parentBinder, this.distanceToInheritedBinder);\n      }\n      this.distanceToInheritedBinder = 0;\n    }\n    return this.inheritedElementBinder;\n  }\n  refreshAttrs() {\n    this._attrs = null;\n  }\n  attrs() {\n    if (isBlank(this._attrs)) {\n      this._attrs = DOM.attributeMap(this.element);\n    }\n    return assert.returnType((this._attrs), assert.genericType(Map, assert.type.string, assert.type.string));\n  }\n  refreshClassList() {\n    this._classList = null;\n  }\n  classList() {\n    if (isBlank(this._classList)) {\n      this._classList = ListWrapper.create();\n      var elClassList = DOM.classList(this.element);\n      for (var i = 0; i < elClassList.length; i++) {\n        ListWrapper.push(this._classList, elClassList[i]);\n      }\n    }\n    return assert.returnType((this._classList), assert.genericType(List, assert.type.string));\n  }\n}\nfunction getElementDescription(domElement) {\n  var buf = new StringJoiner();\n  var atts = DOM.attributeMap(domElement);\n  buf.add(\"<\");\n  buf.add(DOM.tagName(domElement).toLowerCase());\n  addDescriptionAttribute(buf, \"id\", MapWrapper.get(atts, \"id\"));\n  addDescriptionAttribute(buf, \"class\", MapWrapper.get(atts, \"class\"));\n  MapWrapper.forEach(atts, (attValue, attName) => {\n    if (attName !== \"id\" && attName !== \"class\") {\n      addDescriptionAttribute(buf, attName, attValue);\n    }\n  });\n  buf.add(\">\");\n  return assert.returnType((buf.toString()), assert.type.string);\n}\nfunction addDescriptionAttribute(buffer, attName, attValue) {\n  assert.argumentTypes(buffer, StringJoiner, attName, assert.type.string, attValue, assert.type.any);\n  if (isPresent(attValue)) {\n    if (attValue.length === 0) {\n      buffer.add(' ' + attName);\n    } else {\n      buffer.add(' ' + attName + '=\"' + attValue + '\"');\n    }\n  }\n}\nObject.defineProperty(addDescriptionAttribute, \"parameters\", {get: function() {\n    return [[StringJoiner], [assert.type.string], []];\n  }});\n//# sourceMappingURL=compile_element.js.map\n\n//# sourceMappingURL=./compile_element.map"]}