{"version":3,"sources":["compiler.es6"],"names":[],"mappings":"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","file":"angular2/src/render/dom/compiler/compiler.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {Injectable} from 'angular2/di';\nimport {PromiseWrapper,\n  Promise} from 'angular2/src/facade/async';\nimport {BaseException} from 'angular2/src/facade/lang';\nimport {ViewDefinition,\n  ProtoViewDto} from '../../api';\nimport {CompilePipeline} from './compile_pipeline';\nimport {TemplateLoader} from 'angular2/src/render/dom/compiler/template_loader';\nimport {CompileStepFactory,\n  DefaultStepFactory} from './compile_step_factory';\nimport {Parser} from 'angular2/change_detection';\nimport {ShadowDomStrategy} from '../shadow_dom/shadow_dom_strategy';\nexport class Compiler {\n  constructor(stepFactory, templateLoader) {\n    assert.argumentTypes(stepFactory, CompileStepFactory, templateLoader, TemplateLoader);\n    this._templateLoader = templateLoader;\n    this._stepFactory = stepFactory;\n  }\n  compile(template) {\n    var tplPromise = this._templateLoader.load(template);\n    return assert.returnType((PromiseWrapper.then(tplPromise, (el) => this._compileTemplate(template, el), (_) => {\n      throw new BaseException(`Failed to load the template \"${template.componentId}\"`);\n    })), assert.genericType(Promise, ProtoViewDto));\n  }\n  _compileTemplate(template, tplElement) {\n    var subTaskPromises = [];\n    var pipeline = new CompilePipeline(this._stepFactory.createSteps(template, subTaskPromises));\n    var compileElements;\n    compileElements = pipeline.process(tplElement, template.componentId);\n    var protoView = compileElements[0].inheritedProtoView.build();\n    if (subTaskPromises.length > 0) {\n      return assert.returnType((PromiseWrapper.all(subTaskPromises).then((_) => protoView)), assert.genericType(Promise, ProtoViewDto));\n    } else {\n      return assert.returnType((PromiseWrapper.resolve(protoView)), assert.genericType(Promise, ProtoViewDto));\n    }\n  }\n}\nObject.defineProperty(Compiler, \"parameters\", {get: function() {\n    return [[CompileStepFactory], [TemplateLoader]];\n  }});\nObject.defineProperty(Compiler.prototype.compile, \"parameters\", {get: function() {\n    return [[ViewDefinition]];\n  }});\nObject.defineProperty(Compiler.prototype._compileTemplate, \"parameters\", {get: function() {\n    return [[ViewDefinition], []];\n  }});\nexport class DefaultCompiler extends Compiler {\n  constructor(parser, shadowDomStrategy, templateLoader) {\n    assert.argumentTypes(parser, Parser, shadowDomStrategy, ShadowDomStrategy, templateLoader, TemplateLoader);\n    super(new DefaultStepFactory(parser, shadowDomStrategy), templateLoader);\n  }\n}\nObject.defineProperty(DefaultCompiler, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(DefaultCompiler, \"parameters\", {get: function() {\n    return [[Parser], [ShadowDomStrategy], [TemplateLoader]];\n  }});\n//# sourceMappingURL=compiler.js.map\n\n//# sourceMappingURL=./compiler.map"]}