{"version":3,"sources":["template_loader.es6"],"names":[],"mappings":"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","file":"angular2/src/render/dom/compiler/template_loader.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {Injectable} from 'angular2/di';\nimport {isBlank,\n  isPresent,\n  BaseException,\n  stringify} from 'angular2/src/facade/lang';\nimport {Map,\n  MapWrapper,\n  StringMapWrapper,\n  StringMap} from 'angular2/src/facade/collection';\nimport {PromiseWrapper,\n  Promise} from 'angular2/src/facade/async';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {XHR} from 'angular2/src/services/xhr';\nimport {ViewDefinition} from '../../api';\nimport {UrlResolver} from 'angular2/src/services/url_resolver';\nexport class TemplateLoader {\n  constructor(xhr, urlResolver) {\n    assert.argumentTypes(xhr, XHR, urlResolver, UrlResolver);\n    this._xhr = xhr;\n    this._htmlCache = StringMapWrapper.create();\n  }\n  load(template) {\n    assert.argumentTypes(template, ViewDefinition);\n    if (isPresent(template.template)) {\n      return assert.returnType((PromiseWrapper.resolve(DOM.createTemplate(template.template))), Promise);\n    }\n    var url = template.absUrl;\n    if (isPresent(url)) {\n      var promise = StringMapWrapper.get(this._htmlCache, url);\n      if (isBlank(promise)) {\n        promise = this._xhr.get(url).then(function(html) {\n          var template = DOM.createTemplate(html);\n          return template;\n        });\n        StringMapWrapper.set(this._htmlCache, url, promise);\n      }\n      return assert.returnType((promise), Promise);\n    }\n    throw new BaseException('View should have either the url or template property set');\n  }\n}\nObject.defineProperty(TemplateLoader, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(TemplateLoader, \"parameters\", {get: function() {\n    return [[XHR], [UrlResolver]];\n  }});\nObject.defineProperty(TemplateLoader.prototype.load, \"parameters\", {get: function() {\n    return [[ViewDefinition]];\n  }});\n//# sourceMappingURL=template_loader.js.map\n\n//# sourceMappingURL=./template_loader.map"]}