{"version":3,"sources":["key_events.es6"],"names":[],"mappings":"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","file":"angular2/src/render/dom/events/key_events.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {isPresent,\n  isBlank,\n  StringWrapper,\n  RegExpWrapper,\n  BaseException,\n  NumberWrapper} from 'angular2/src/facade/lang';\nimport {StringMapWrapper,\n  ListWrapper} from 'angular2/src/facade/collection';\nimport {EventManagerPlugin} from './event_manager';\nvar modifierKeys = ['alt', 'control', 'meta', 'shift'];\nvar modifierKeyGetters = {\n  'alt': (event) => event.altKey,\n  'control': (event) => event.ctrlKey,\n  'meta': (event) => event.metaKey,\n  'shift': (event) => event.shiftKey\n};\nexport class KeyEventsPlugin extends EventManagerPlugin {\n  constructor() {\n    super();\n  }\n  supports(eventName) {\n    assert.argumentTypes(eventName, assert.type.string);\n    return assert.returnType((isPresent(KeyEventsPlugin.parseEventName(eventName))), assert.type.boolean);\n  }\n  addEventListener(element, eventName, handler, shouldSupportBubble) {\n    assert.argumentTypes(element, assert.type.any, eventName, assert.type.string, handler, Function, shouldSupportBubble, assert.type.boolean);\n    var parsedEvent = KeyEventsPlugin.parseEventName(eventName);\n    var outsideHandler = KeyEventsPlugin.eventCallback(element, shouldSupportBubble, StringMapWrapper.get(parsedEvent, 'fullKey'), handler, this.manager.getZone());\n    this.manager.getZone().runOutsideAngular(() => {\n      DOM.on(element, StringMapWrapper.get(parsedEvent, 'domEventName'), outsideHandler);\n    });\n  }\n  static parseEventName(eventName) {\n    assert.argumentTypes(eventName, assert.type.string);\n    eventName = eventName.toLowerCase();\n    var parts = eventName.split('.');\n    var domEventName = ListWrapper.removeAt(parts, 0);\n    if ((parts.length === 0) || !(StringWrapper.equals(domEventName, 'keydown') || StringWrapper.equals(domEventName, 'keyup'))) {\n      return null;\n    }\n    var key = ListWrapper.removeLast(parts);\n    var fullKey = '';\n    ListWrapper.forEach(modifierKeys, (modifierName) => {\n      if (ListWrapper.contains(parts, modifierName)) {\n        ListWrapper.remove(parts, modifierName);\n        fullKey += modifierName + '.';\n      }\n    });\n    fullKey += key;\n    if (parts.length != 0 || key.length === 0) {\n      return null;\n    }\n    return {\n      'domEventName': domEventName,\n      'fullKey': fullKey\n    };\n  }\n  static getEventFullKey(event) {\n    var fullKey = '';\n    var key = DOM.getEventKey(event);\n    key = key.toLowerCase();\n    if (StringWrapper.equals(key, ' ')) {\n      key = 'space';\n    } else if (StringWrapper.equals(key, '.')) {\n      key = 'dot';\n    }\n    ListWrapper.forEach(modifierKeys, (modifierName) => {\n      if (modifierName != key) {\n        var modifierGetter = StringMapWrapper.get(modifierKeyGetters, modifierName);\n        if (modifierGetter(event)) {\n          fullKey += modifierName + '.';\n        }\n      }\n    });\n    fullKey += key;\n    return assert.returnType((fullKey), assert.type.string);\n  }\n  static eventCallback(element, shouldSupportBubble, fullKey, handler, zone) {\n    return (event) => {\n      var correctElement = shouldSupportBubble || event.target === element;\n      if (correctElement && KeyEventsPlugin.getEventFullKey(event) === fullKey) {\n        zone.run(() => handler(event));\n      }\n    };\n  }\n}\nObject.defineProperty(KeyEventsPlugin.prototype.supports, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(KeyEventsPlugin.prototype.addEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function], [assert.type.boolean]];\n  }});\nObject.defineProperty(KeyEventsPlugin.parseEventName, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\n//# sourceMappingURL=key_events.js.map\n\n//# sourceMappingURL=./key_events.map"]}