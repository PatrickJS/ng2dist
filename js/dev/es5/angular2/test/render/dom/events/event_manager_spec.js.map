{"version":3,"sources":["event_manager_spec.es6"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,0OAAoB,UAAS,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;AAoB7C,SAAS,KAAG,CAAE,AAAD;AAClB,AAAI,MAAA,CAAA,cAAa,CAAC;AAClB,aAAS,AAAC,EAAC,SAAC,AAAD,CAAM;AACf,mBAAa,EAAI,IAAI,gBAAc,AAAC,EAAC,CAAC;IACxC,EAAC,CAAC;AACF,WAAO,AAAC,CAAC,cAAa,GAAG,SAAC,AAAD;AACvB,OAAC,AAAC,CAAC,2CAA0C,GAAG,SAAC,AAAD;AAC9C,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,EAAC,AAAC,CAAC,aAAY,CAAC,CAAC;AAC/B,AAAI,UAAA,CAAA,OAAM,IAAI,SAAC,CAAA;eAAM,EAAA;QAAA,CAAA,CAAC;AACtB,AAAI,UAAA,CAAA,MAAK,EAAI,IAAI,uBAAqB,AAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC;AAClD,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,aAAW,AAAC,CAAC,CAAC,MAAK,CAAG,eAAa,CAAC,CAAG,IAAI,eAAa,AAAC,EAAC,CAAC,CAAC;AAC9E,cAAM,iBAAiB,AAAC,CAAC,OAAM,CAAG,QAAM,CAAG,QAAM,CAAC,CAAC;AACnD,aAAK,AAAC,CAAC,UAAS,IAAI,AAAC,CAAC,MAAK,wBAAwB,CAAG,QAAM,CAAC,CAAC,KAAK,AAAC,CAAC,OAAM,CAAC,CAAC;MAC/E,EAAC,CAAC;AACF,OAAC,AAAC,CAAC,4CAA2C,GAAG,SAAC,AAAD;AAC/C,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,EAAC,AAAC,CAAC,aAAY,CAAC,CAAC;AAC/B,AAAI,UAAA,CAAA,OAAM,IAAI,SAAC,CAAA;eAAM,EAAA;QAAA,CAAA,CAAC;AACtB,AAAI,UAAA,CAAA,MAAK,EAAI,IAAI,uBAAqB,AAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC;AAClD,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,aAAW,AAAC,CAAC,CAAC,MAAK,CAAG,eAAa,CAAC,CAAG,IAAI,eAAa,AAAC,EAAC,CAAC,CAAC;AAC9E,cAAM,iBAAiB,AAAC,CAAC,OAAM,CAAG,SAAO,CAAG,QAAM,CAAC,CAAC;AACpD,aAAK,AAAC,CAAC,UAAS,IAAI,AAAC,CAAC,MAAK,qBAAqB,CAAG,QAAM,CAAC,CAAC,KAAK,AAAC,CAAC,OAAM,CAAC,CAAC;MAC5E,EAAC,CAAC;AACF,OAAC,AAAC,CAAC,yEAAwE,GAAG,SAAC,AAAD;AAC5E,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,EAAC,AAAC,CAAC,aAAY,CAAC,CAAC;AAC/B,AAAI,UAAA,CAAA,YAAW,IAAI,SAAC,CAAA;eAAM,EAAA;QAAA,CAAA,CAAC;AAC3B,AAAI,UAAA,CAAA,eAAc,IAAI,SAAC,CAAA;eAAM,EAAA;QAAA,CAAA,CAAC;AAC9B,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,uBAAqB,AAAC,CAAC,CAAC,UAAS,CAAC,CAAC,CAAC;AACtD,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,uBAAqB,AAAC,CAAC,CAAC,OAAM,CAAG,WAAS,CAAC,CAAC,CAAC;AAC/D,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,aAAW,AAAC,CAAC,CAAC,OAAM,CAAG,QAAM,CAAC,CAAG,IAAI,eAAa,AAAC,EAAC,CAAC,CAAC;AACxE,cAAM,iBAAiB,AAAC,CAAC,OAAM,CAAG,QAAM,CAAG,aAAW,CAAC,CAAC;AACxD,cAAM,iBAAiB,AAAC,CAAC,OAAM,CAAG,WAAS,CAAG,gBAAc,CAAC,CAAC;AAC9D,aAAK,AAAC,CAAC,UAAS,SAAS,AAAC,CAAC,OAAM,wBAAwB,CAAG,QAAM,CAAC,CAAC,KAAK,AAAC,CAAC,KAAI,CAAC,CAAC;AACjF,aAAK,AAAC,CAAC,UAAS,IAAI,AAAC,CAAC,OAAM,wBAAwB,CAAG,QAAM,CAAC,CAAC,KAAK,AAAC,CAAC,YAAW,CAAC,CAAC;AACnF,aAAK,AAAC,CAAC,UAAS,SAAS,AAAC,CAAC,OAAM,wBAAwB,CAAG,WAAS,CAAC,CAAC,KAAK,AAAC,CAAC,KAAI,CAAC,CAAC;AACpF,aAAK,AAAC,CAAC,UAAS,IAAI,AAAC,CAAC,OAAM,wBAAwB,CAAG,WAAS,CAAC,CAAC,KAAK,AAAC,CAAC,eAAc,CAAC,CAAC;MAC3F,EAAC,CAAC;AACF,OAAC,AAAC,CAAC,kDAAiD,GAAG,SAAC,AAAD;AACrD,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,EAAC,AAAC,CAAC,aAAY,CAAC,CAAC;AAC/B,AAAI,UAAA,CAAA,MAAK,EAAI,IAAI,uBAAqB,AAAC,CAAC,CAAC,UAAS,CAAC,CAAC,CAAC;AACrD,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,aAAW,AAAC,CAAC,CAAC,MAAK,CAAC,CAAG,IAAI,eAAa,AAAC,EAAC,CAAC,CAAC;AAC9D,aAAK,AAAC,EAAC,SAAC,AAAD;eAAM,CAAA,OAAM,iBAAiB,AAAC,CAAC,OAAM,CAAG,QAAM,CAAG,KAAG,CAAC;QAAA,EAAC,aAAa,AAAC,CAAC,+CAA8C,CAAC,CAAC;MAC9H,EAAC,CAAC;AACF,OAAC,AAAC,CAAC,mDAAkD,GAAG,SAAC,AAAD;AACtD,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,EAAC,AAAC,CAAC,wBAAuB,CAAC,CAAC;AAC1C,AAAI,UAAA,CAAA,KAAI,EAAI,CAAA,GAAE,WAAW,AAAC,CAAC,OAAM,CAAC,CAAC;AACnC,AAAI,UAAA,CAAA,eAAc,EAAI,CAAA,GAAE,iBAAiB,AAAC,CAAC,OAAM,CAAC,CAAC;AACnD,AAAI,UAAA,CAAA,aAAY,EAAI,KAAG,CAAC;AACxB,AAAI,UAAA,CAAA,OAAM,IAAI,SAAC,CAAA,CAAM;AACnB,sBAAY,EAAI,EAAA,CAAC;QACnB,CAAA,CAAC;AACD,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,aAAW,AAAC,CAAC,CAAC,cAAa,CAAC,CAAG,IAAI,eAAa,AAAC,EAAC,CAAC,CAAC;AACtE,cAAM,iBAAiB,AAAC,CAAC,OAAM,CAAG,QAAM,CAAG,QAAM,CAAC,CAAC;AACnD,UAAE,cAAc,AAAC,CAAC,KAAI,CAAG,gBAAc,CAAC,CAAC;AACzC,aAAK,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC;MAClC,EAAC,CAAC;AACF,OAAC,AAAC,CAAC,mDAAkD,GAAG,SAAC,AAAD;AACtD,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,EAAC,AAAC,CAAC,wBAAuB,CAAC,CAAC;AAC1C,UAAE,YAAY,AAAC,CAAC,QAAO,KAAK,CAAG,QAAM,CAAC,CAAC;AACvC,AAAI,UAAA,CAAA,KAAI,EAAI,CAAA,GAAE,WAAW,AAAC,CAAC,OAAM,CAAC,CAAC;AACnC,AAAI,UAAA,CAAA,eAAc,EAAI,CAAA,GAAE,iBAAiB,AAAC,CAAC,OAAM,CAAC,CAAC;AACnD,AAAI,UAAA,CAAA,aAAY,EAAI,KAAG,CAAC;AACxB,AAAI,UAAA,CAAA,OAAM,IAAI,SAAC,CAAA,CAAM;AACnB,sBAAY,EAAI,EAAA,CAAC;QACnB,CAAA,CAAC;AACD,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,aAAW,AAAC,CAAC,CAAC,cAAa,CAAC,CAAG,IAAI,eAAa,AAAC,EAAC,CAAC,CAAC;AACtE,cAAM,iBAAiB,AAAC,CAAC,OAAM,CAAG,SAAO,CAAG,QAAM,CAAC,CAAC;AACpD,UAAE,cAAc,AAAC,CAAC,KAAI,CAAG,gBAAc,CAAC,CAAC;AACzC,aAAK,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAC,eAAc,CAAC,CAAC;MAC7C,EAAC,CAAC;AACF,OAAC,AAAC,CAAC,oEAAmE,GAAG,SAAC,AAAD;AACvE,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,EAAC,AAAC,CAAC,wBAAuB,CAAC,CAAC;AAC1C,UAAE,YAAY,AAAC,CAAC,QAAO,KAAK,CAAG,QAAM,CAAC,CAAC;AACvC,AAAI,UAAA,CAAA,eAAc,EAAI,CAAA,GAAE,iBAAiB,AAAC,CAAC,OAAM,CAAC,CAAC;AACnD,AAAI,UAAA,CAAA,aAAY,EAAI,KAAG,CAAC;AACxB,AAAI,UAAA,CAAA,OAAM,IAAI,SAAC,CAAA,CAAM;AACnB,sBAAY,EAAI,EAAA,CAAC;QACnB,CAAA,CAAC;AACD,AAAI,UAAA,CAAA,OAAM,EAAI,IAAI,aAAW,AAAC,CAAC,CAAC,cAAa,CAAC,CAAG,IAAI,eAAa,AAAC,EAAC,CAAC,CAAC;AACtE,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,OAAM,uBAAuB,AAAC,CAAC,UAAS,CAAG,SAAO,CAAG,QAAM,CAAC,CAAC;AAC3E,UAAE,cAAc,AAAC,CAAC,OAAM,CAAG,gBAAc,CAAC,CAAC;AAC3C,aAAK,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAC,eAAc,CAAC,CAAC;AAC3C,oBAAY,EAAI,KAAG,CAAC;AACpB,cAAM,AAAC,EAAC,CAAC;AACT,UAAE,cAAc,AAAC,CAAC,OAAM,CAAG,gBAAc,CAAC,CAAC;AAC3C,aAAK,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC;AAChC,cAAM,EAAI,CAAA,OAAM,uBAAuB,AAAC,CAAC,UAAS,CAAG,QAAM,CAAG,QAAM,CAAC,CAAC;AACtE,UAAE,cAAc,AAAC,CAAC,OAAM,CAAG,gBAAc,CAAC,CAAC;AAC3C,aAAK,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC;MAClC,EAAC,CAAC;IACJ,EAAC,CAAC;EACJ;AA7GQ,UAAQ,AAAC,cAAqC,CAAA;AADtD,OAAO;AACD,UAAM,GADZ,SAAS,IAAG,CAAG;AAAf,aAAoB,KAAG,OAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,eAAoB,KAAG,SAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,SAAoB,KAAG,GAAkB,CAAC;AAA1C,UAAoB,KAAG,IAAkB,CAAC;AAA1C,UAAoB,KAAG,IAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,aAAoB,KAAG,OAAkB,CAAC;AAA1C,iBAAoB,KAAG,WAAkB,CAAC;AAA1C,SAAoB,KAAG,GAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,mBAAoB,KAAG,aAAkB,CAAC;AAA1C,yBAAoB,KAAG,mBAAkB,CAAC;AAA1C,sBAAoB,KAAG,gBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,iBAAoB,KAAG,WAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,kBAAoB,KAAG,YAAkB,CAAC;AAA1C,UAAoB,KAAG,IAAkB,CAAC;AAA1C,iBAAoB,KAAG,WAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,eAAoB,KAAG,SAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,UAAoB,KAAG,IAAkB,CAAC;IAElC,CADuB;AACzB,UAAM;AAFZ,+BAAA,SAAS,QAAO;AACN,AAAI,UAAA,yBA8Gd,SAAM,uBAAqB,CACb,QAAO,CAAG;AACpB,eAAK,cAAc,AAAC,CAAC,QAAO,CAAG,CAAA,MAAK,YAAY,AAAC,CAAC,IAAG,CAAG,CAAA,MAAK,KAAK,OAAO,CAAC,CAAC,CAAC;AAC5E,AAlHJ,wBAAc,iBAAiB,AAAC,wBAAkB,KAAK,MAAmB,CAkH/D;AACP,aAAG,UAAU,EAAI,SAAO,CAAC;AACzB,aAAG,wBAAwB,EAAI,CAAA,UAAS,OAAO,AAAC,EAAC,CAAC;AAClD,aAAG,qBAAqB,EAAI,CAAA,UAAS,OAAO,AAAC,EAAC,CAAC;QACjD,AArHgD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AAqH5C,iBAAO,CAAP,UAAS,SAAQ,CAAG;AAClB,iBAAK,cAAc,AAAC,CAAC,SAAQ,CAAG,CAAA,MAAK,KAAK,OAAO,CAAC,CAAC;AACnD,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CAAC,WAAU,SAAS,AAAC,CAAC,IAAG,UAAU,CAAG,UAAQ,CAAC,CAAC,CAAG,CAAA,MAAK,KAAK,QAAQ,CAAC,CAAC;UAClG;AACA,yBAAe,CAAf,UAAiB,OAAM,CAAG,CAAA,SAAQ,CAAG,CAAA,OAAM,CAAG,CAAA,mBAAkB;;AAC9D,iBAAK,cAAc,AAAC,CAAC,OAAM,CAAG,CAAA,MAAK,KAAK,IAAI,CAAG,UAAQ,CAAG,CAAA,MAAK,KAAK,OAAO,CAAG,QAAM,CAAG,SAAO,CAAG,oBAAkB,CAAG,CAAA,MAAK,KAAK,QAAQ,CAAC,CAAC;AAC1I,qBAAS,IAAI,AAAC,CAAC,mBAAkB,EAAI,CAAA,IAAG,qBAAqB,EAAI,CAAA,IAAG,wBAAwB,CAAG,UAAQ,CAAG,QAAM,CAAC,CAAC;AAClH,mBAAO,SAAC,AAAD,CAAM;AACX,uBAAS,OAAO,AAAC,CAAC,mBAAkB,EAAI,0BAAwB,EAAI,6BAA2B,CAAG,UAAQ,CAAC,CAAC;YAC9G,EAAC;UACH;aA9HgE,SAAO,CAAC,CAAC;MACnE,AAAC,CA2G4B,kBAAiB,CA3G3B,CAJS,CAAA;AAmIpC,WAAK,eAAe,AAAC,CAAC,sBAAqB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AACzE,eAAO,EAAC,CAAC,MAAK,YAAY,AAAC,CAAC,IAAG,CAAG,CAAA,MAAK,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,sBAAqB,UAAU,SAAS,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAC5F,eAAO,EAAC,CAAC,MAAK,KAAK,OAAO,CAAC,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,sBAAqB,UAAU,iBAAiB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AACpG,eAAO,EAAC,EAAC,CAAG,EAAC,MAAK,KAAK,OAAO,CAAC,CAAG,EAAC,QAAO,CAAC,CAAG,EAAC,MAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;AA3IL,uBAAA,SAAS,QAAO;AACN,AAAI,UAAA,iBA2Id,SAAM,eAAa,CACL,AAAD,CAAG;AACZ,AA9IJ,wBAAc,iBAAiB,AAAC,gBAAkB,KAAK,MA8I7C,EAAC,oBAAmB,CAAG,MAAI,CAAC,CA9IoC,CA8IlC;QACtC,AA9IgD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AA8I5C,YAAE,CAAF,UAAI,EAAC,CAAG;AACN,aAAC,AAAC,EAAC,CAAC;UACN;AACA,0BAAgB,CAAhB,UAAkB,EAAC,CAAG;AACpB,iBAAO,CAAA,EAAC,AAAC,EAAC,CAAC;UACb;AAAA,aAlJgE,SAAO,CAAC,CAAC;MACnE,AAAC,CAwIoB,UAAS,CAxIX,CAJS,CAAA;IAEL;EAC3B,CAAA;AADI,CAAC,CAAC;AAuJkC","file":"angular2/test/render/dom/events/event_manager_spec.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {describe,\n  ddescribe,\n  it,\n  iit,\n  xit,\n  xdescribe,\n  expect,\n  beforeEach,\n  el} from 'angular2/test_lib';\nimport {EventManager,\n  EventManagerPlugin,\n  DomEventsPlugin} from 'angular2/src/render/dom/events/event_manager';\nimport {VmTurnZone} from 'angular2/src/core/zone/vm_turn_zone';\nimport {List,\n  ListWrapper,\n  Map,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {document} from 'angular2/src/facade/browser';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nexport function main() {\n  var domEventPlugin;\n  beforeEach(() => {\n    domEventPlugin = new DomEventsPlugin();\n  });\n  describe('EventManager', () => {\n    it('should delegate event bindings to plugins', () => {\n      var element = el('<div></div>');\n      var handler = (e) => e;\n      var plugin = new FakeEventManagerPlugin(['click']);\n      var manager = new EventManager([plugin, domEventPlugin], new FakeVmTurnZone());\n      manager.addEventListener(element, 'click', handler);\n      expect(MapWrapper.get(plugin._nonBubbleEventHandlers, 'click')).toBe(handler);\n    });\n    it('should delegate bubbling events to plugins', () => {\n      var element = el('<div></div>');\n      var handler = (e) => e;\n      var plugin = new FakeEventManagerPlugin(['click']);\n      var manager = new EventManager([plugin, domEventPlugin], new FakeVmTurnZone());\n      manager.addEventListener(element, '^click', handler);\n      expect(MapWrapper.get(plugin._bubbleEventHandlers, 'click')).toBe(handler);\n    });\n    it('should delegate event bindings to the first plugin supporting the event', () => {\n      var element = el('<div></div>');\n      var clickHandler = (e) => e;\n      var dblClickHandler = (e) => e;\n      var plugin1 = new FakeEventManagerPlugin(['dblclick']);\n      var plugin2 = new FakeEventManagerPlugin(['click', 'dblclick']);\n      var manager = new EventManager([plugin1, plugin2], new FakeVmTurnZone());\n      manager.addEventListener(element, 'click', clickHandler);\n      manager.addEventListener(element, 'dblclick', dblClickHandler);\n      expect(MapWrapper.contains(plugin1._nonBubbleEventHandlers, 'click')).toBe(false);\n      expect(MapWrapper.get(plugin2._nonBubbleEventHandlers, 'click')).toBe(clickHandler);\n      expect(MapWrapper.contains(plugin2._nonBubbleEventHandlers, 'dblclick')).toBe(false);\n      expect(MapWrapper.get(plugin1._nonBubbleEventHandlers, 'dblclick')).toBe(dblClickHandler);\n    });\n    it('should throw when no plugin can handle the event', () => {\n      var element = el('<div></div>');\n      var plugin = new FakeEventManagerPlugin(['dblclick']);\n      var manager = new EventManager([plugin], new FakeVmTurnZone());\n      expect(() => manager.addEventListener(element, 'click', null)).toThrowError('No event manager plugin found for event click');\n    });\n    it('by default events are only caught on same element', () => {\n      var element = el('<div><div></div></div>');\n      var child = DOM.firstChild(element);\n      var dispatchedEvent = DOM.createMouseEvent('click');\n      var receivedEvent = null;\n      var handler = (e) => {\n        receivedEvent = e;\n      };\n      var manager = new EventManager([domEventPlugin], new FakeVmTurnZone());\n      manager.addEventListener(element, 'click', handler);\n      DOM.dispatchEvent(child, dispatchedEvent);\n      expect(receivedEvent).toBe(null);\n    });\n    it('bubbled events are caught when fired from a child', () => {\n      var element = el('<div><div></div></div>');\n      DOM.appendChild(document.body, element);\n      var child = DOM.firstChild(element);\n      var dispatchedEvent = DOM.createMouseEvent('click');\n      var receivedEvent = null;\n      var handler = (e) => {\n        receivedEvent = e;\n      };\n      var manager = new EventManager([domEventPlugin], new FakeVmTurnZone());\n      manager.addEventListener(element, '^click', handler);\n      DOM.dispatchEvent(child, dispatchedEvent);\n      expect(receivedEvent).toBe(dispatchedEvent);\n    });\n    it('should add and remove global event listeners with correct bubbling', () => {\n      var element = el('<div><div></div></div>');\n      DOM.appendChild(document.body, element);\n      var dispatchedEvent = DOM.createMouseEvent('click');\n      var receivedEvent = null;\n      var handler = (e) => {\n        receivedEvent = e;\n      };\n      var manager = new EventManager([domEventPlugin], new FakeVmTurnZone());\n      var remover = manager.addGlobalEventListener(\"document\", '^click', handler);\n      DOM.dispatchEvent(element, dispatchedEvent);\n      expect(receivedEvent).toBe(dispatchedEvent);\n      receivedEvent = null;\n      remover();\n      DOM.dispatchEvent(element, dispatchedEvent);\n      expect(receivedEvent).toBe(null);\n      remover = manager.addGlobalEventListener(\"document\", 'click', handler);\n      DOM.dispatchEvent(element, dispatchedEvent);\n      expect(receivedEvent).toBe(null);\n    });\n  });\n}\nclass FakeEventManagerPlugin extends EventManagerPlugin {\n  constructor(supports) {\n    assert.argumentTypes(supports, assert.genericType(List, assert.type.string));\n    super();\n    this._supports = supports;\n    this._nonBubbleEventHandlers = MapWrapper.create();\n    this._bubbleEventHandlers = MapWrapper.create();\n  }\n  supports(eventName) {\n    assert.argumentTypes(eventName, assert.type.string);\n    return assert.returnType((ListWrapper.contains(this._supports, eventName)), assert.type.boolean);\n  }\n  addEventListener(element, eventName, handler, shouldSupportBubble) {\n    assert.argumentTypes(element, assert.type.any, eventName, assert.type.string, handler, Function, shouldSupportBubble, assert.type.boolean);\n    MapWrapper.set(shouldSupportBubble ? this._bubbleEventHandlers : this._nonBubbleEventHandlers, eventName, handler);\n    return () => {\n      MapWrapper.delete(shouldSupportBubble ? this._bubbleEventHandlers : this._nonBubbleEventHandlers, eventName);\n    };\n  }\n}\nObject.defineProperty(FakeEventManagerPlugin, \"parameters\", {get: function() {\n    return [[assert.genericType(List, assert.type.string)]];\n  }});\nObject.defineProperty(FakeEventManagerPlugin.prototype.supports, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(FakeEventManagerPlugin.prototype.addEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function], [assert.type.boolean]];\n  }});\nclass FakeVmTurnZone extends VmTurnZone {\n  constructor() {\n    super({enableLongStackTrace: false});\n  }\n  run(fn) {\n    fn();\n  }\n  runOutsideAngular(fn) {\n    return fn();\n  }\n}\n//# sourceMappingURL=event_manager_spec.js.map\n\n//# sourceMappingURL=./event_manager_spec.map"]}