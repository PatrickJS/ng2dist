{"version":3,"sources":["xhr_mock_spec.es6"],"names":[],"mappings":"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","file":"angular2/test/mock/xhr_mock_spec.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {AsyncTestCompleter,\n  beforeEach,\n  ddescribe,\n  describe,\n  el,\n  expect,\n  iit,\n  inject,\n  IS_DARTIUM,\n  it} from 'angular2/test_lib';\nimport {MockXHR} from 'angular2/src/mock/xhr_mock';\nimport {PromiseWrapper,\n  Promise} from 'angular2/src/facade/async';\nimport {isPresent} from 'angular2/src/facade/lang';\nexport function main() {\n  describe('MockXHR', () => {\n    var xhr;\n    beforeEach(() => {\n      xhr = new MockXHR();\n    });\n    function expectResponse(request, url, response, done = null) {\n      assert.argumentTypes(request, Promise, url, assert.type.string, response, assert.type.string, done, assert.type.any);\n      function onResponse(text) {\n        assert.argumentTypes(text, assert.type.string);\n        if (response === null) {\n          throw `Unexpected response ${url} -> ${text}`;\n        } else {\n          expect(text).toEqual(response);\n          if (isPresent(done))\n            done();\n        }\n      }\n      Object.defineProperty(onResponse, \"parameters\", {get: function() {\n          return [[assert.type.string]];\n        }});\n      function onError(error) {\n        assert.argumentTypes(error, assert.type.string);\n        if (response !== null) {\n          throw `Unexpected error ${url}`;\n        } else {\n          expect(error).toEqual(`Failed to load ${url}`);\n          if (isPresent(done))\n            done();\n        }\n      }\n      Object.defineProperty(onError, \"parameters\", {get: function() {\n          return [[assert.type.string]];\n        }});\n      PromiseWrapper.then(request, onResponse, onError);\n    }\n    Object.defineProperty(expectResponse, \"parameters\", {get: function() {\n        return [[Promise], [assert.type.string], [assert.type.string], []];\n      }});\n    it('should return a response from the definitions', inject([AsyncTestCompleter], (async) => {\n      var url = '/foo';\n      var response = 'bar';\n      xhr.when(url, response);\n      expectResponse(xhr.get(url), url, response, () => async.done());\n      xhr.flush();\n    }));\n    it('should return an error from the definitions', inject([AsyncTestCompleter], (async) => {\n      var url = '/foo';\n      var response = null;\n      xhr.when(url, response);\n      expectResponse(xhr.get(url), url, response, () => async.done());\n      xhr.flush();\n    }));\n    it('should return a response from the expectations', inject([AsyncTestCompleter], (async) => {\n      var url = '/foo';\n      var response = 'bar';\n      xhr.expect(url, response);\n      expectResponse(xhr.get(url), url, response, () => async.done());\n      xhr.flush();\n    }));\n    it('should return an error from the expectations', inject([AsyncTestCompleter], (async) => {\n      var url = '/foo';\n      var response = null;\n      xhr.expect(url, response);\n      expectResponse(xhr.get(url), url, response, () => async.done());\n      xhr.flush();\n    }));\n    it('should not reuse expectations', () => {\n      var url = '/foo';\n      var response = 'bar';\n      xhr.expect(url, response);\n      xhr.get(url);\n      xhr.get(url);\n      expect(() => {\n        xhr.flush();\n      }).toThrowError('Unexpected request /foo');\n    });\n    it('should return expectations before definitions', inject([AsyncTestCompleter], (async) => {\n      var url = '/foo';\n      xhr.when(url, 'when');\n      xhr.expect(url, 'expect');\n      expectResponse(xhr.get(url), url, 'expect');\n      expectResponse(xhr.get(url), url, 'when', () => async.done());\n      xhr.flush();\n    }));\n    it('should throw when there is no definitions or expectations', () => {\n      xhr.get('/foo');\n      expect(() => {\n        xhr.flush();\n      }).toThrowError('Unexpected request /foo');\n    });\n    it('should throw when flush is called without any pending requests', () => {\n      expect(() => {\n        xhr.flush();\n      }).toThrowError('No pending requests to flush');\n    });\n    it('should throw on unstatisfied expectations', () => {\n      xhr.expect('/foo', 'bar');\n      xhr.when('/bar', 'foo');\n      xhr.get('/bar');\n      expect(() => {\n        xhr.flush();\n      }).toThrowError('Unsatisfied requests: /foo');\n    });\n  });\n}\n//# sourceMappingURL=xhr_mock_spec.js.map\n\n//# sourceMappingURL=./xhr_mock_spec.map"]}