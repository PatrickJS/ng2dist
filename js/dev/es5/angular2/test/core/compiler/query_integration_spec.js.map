{"version":3,"sources":["query_integration_spec.es6"],"names":[],"mappings":"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","file":"angular2/test/core/compiler/query_integration_spec.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {AsyncTestCompleter,\n  beforeEach,\n  ddescribe,\n  describe,\n  el,\n  expect,\n  iit,\n  inject,\n  IS_NODEJS,\n  it,\n  xit} from 'angular2/test_lib';\nimport {TestBed} from 'angular2/src/test_lib/test_bed';\nimport {QueryList} from 'angular2/src/core/compiler/query_list';\nimport {Query} from 'angular2/src/core/annotations/di';\nimport {Decorator,\n  Component,\n  View,\n  If,\n  For} from 'angular2/angular2';\nimport {BrowserDomAdapter} from 'angular2/src/dom/browser_adapter';\nexport function main() {\n  BrowserDomAdapter.makeCurrent();\n  describe('Query API', () => {\n    it('should contain all directives in the light dom', inject([TestBed, AsyncTestCompleter], (tb, async) => {\n      var template = '<div text=\"1\"></div>' + '<needs-query text=\"2\"><div text=\"3\"></div></needs-query>' + '<div text=\"4\"></div>';\n      tb.createView(MyComp, {html: template}).then((view) => {\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|3|');\n        async.done();\n      });\n    }));\n    it('should reflect dynamically inserted directives', inject([TestBed, AsyncTestCompleter], (tb, async) => {\n      var template = '<div text=\"1\"></div>' + '<needs-query text=\"2\"><div *if=\"shouldShow\" [text]=\"\\'3\\'\"></div></needs-query>' + '<div text=\"4\"></div>';\n      tb.createView(MyComp, {html: template}).then((view) => {\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|');\n        view.context.shouldShow = true;\n        view.detectChanges();\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|3|');\n        async.done();\n      });\n    }));\n    it('should reflect moved directives', inject([TestBed, AsyncTestCompleter], (tb, async) => {\n      var template = '<div text=\"1\"></div>' + '<needs-query text=\"2\"><div *for=\"var i of list\" [text]=\"i\"></div></needs-query>' + '<div text=\"4\"></div>';\n      tb.createView(MyComp, {html: template}).then((view) => {\n        view.detectChanges();\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|1d|2d|3d|');\n        view.context.list = ['3d', '2d'];\n        view.detectChanges();\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|3d|2d|');\n        async.done();\n      });\n    }));\n  });\n}\nclass NeedsQuery {\n  constructor(query) {\n    assert.argumentTypes(query, QueryList);\n    this.query = query;\n  }\n}\nObject.defineProperty(NeedsQuery, \"annotations\", {get: function() {\n    return [new Component({selector: 'needs-query'}), new View({\n      directives: [For],\n      template: '<div *for=\"var dir of query\">{{dir.text}}|</div>'\n    })];\n  }});\nObject.defineProperty(NeedsQuery, \"parameters\", {get: function() {\n    return [[QueryList, new Query(TextDirective)]];\n  }});\nvar _constructiontext = 0;\nclass TextDirective {\n  constructor() {}\n}\nObject.defineProperty(TextDirective, \"annotations\", {get: function() {\n    return [new Decorator({\n      selector: '[text]',\n      properties: {'text': 'text'}\n    })];\n  }});\nclass MyComp {\n  constructor() {\n    this.shouldShow = false;\n    this.list = ['1d', '2d', '3d'];\n  }\n}\nObject.defineProperty(MyComp, \"annotations\", {get: function() {\n    return [new Component({selector: 'my-comp'}), new View({directives: [NeedsQuery, TextDirective, If, For]})];\n  }});\n//# sourceMappingURL=query_integration_spec.js.map\n\n//# sourceMappingURL=./query_integration_spec.map"]}