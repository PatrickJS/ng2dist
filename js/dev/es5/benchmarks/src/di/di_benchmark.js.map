{"version":3,"sources":["di_benchmark.es6"],"names":[],"mappings":"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","file":"benchmarks/src/di/di_benchmark.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {Injectable,\n  Injector,\n  Key,\n  bind} from \"angular2/di\";\nimport {reflector} from 'angular2/src/reflection/reflection';\nimport {ReflectionCapabilities} from 'angular2/src/reflection/reflection_capabilities';\nimport {getIntParameter,\n  bindAction,\n  microBenchmark} from 'angular2/src/test_lib/benchmark_util';\nimport {BrowserDomAdapter} from 'angular2/src/dom/browser_adapter';\nvar count = 0;\nfunction setupReflector() {\n  reflector.reflectionCapabilities = new ReflectionCapabilities();\n}\nexport function main() {\n  BrowserDomAdapter.makeCurrent();\n  var iterations = getIntParameter('iterations');\n  setupReflector();\n  var bindings = [A, B, C, D, E];\n  var injector = Injector.resolveAndCreate(bindings);\n  var D_KEY = Key.get(D);\n  var E_KEY = Key.get(E);\n  var childInjector = injector.resolveAndCreateChild([]).resolveAndCreateChild([]).resolveAndCreateChild([]).resolveAndCreateChild([]).resolveAndCreateChild([]);\n  var variousBindings = [A, bind(B).toClass(C), [D, [E]], bind(F).toValue(6)];\n  var variousBindingsResolved = Injector.resolve(variousBindings);\n  function getByToken() {\n    for (var i = 0; i < iterations; ++i) {\n      injector.get(D);\n      injector.get(E);\n    }\n  }\n  function getByKey() {\n    for (var i = 0; i < iterations; ++i) {\n      injector.get(D_KEY);\n      injector.get(E_KEY);\n    }\n  }\n  function getChild() {\n    for (var i = 0; i < iterations; ++i) {\n      childInjector.get(D);\n      childInjector.get(E);\n    }\n  }\n  function instantiate() {\n    for (var i = 0; i < iterations; ++i) {\n      var child = injector.resolveAndCreateChild([E]);\n      child.get(E);\n    }\n  }\n  function createVariety() {\n    for (var i = 0; i < iterations; ++i) {\n      Injector.resolveAndCreate(variousBindings);\n    }\n  }\n  function createVarietyResolved() {\n    for (var i = 0; i < iterations; ++i) {\n      Injector.fromResolvedBindings(variousBindingsResolved);\n    }\n  }\n  bindAction('#getByToken', () => microBenchmark('injectAvg', iterations, getByToken));\n  bindAction('#getByKey', () => microBenchmark('injectAvg', iterations, getByKey));\n  bindAction('#getChild', () => microBenchmark('injectAvg', iterations, getChild));\n  bindAction('#instantiate', () => microBenchmark('injectAvg', iterations, instantiate));\n  bindAction('#createVariety', () => microBenchmark('injectAvg', iterations, createVariety));\n  bindAction('#createVarietyResolved', () => microBenchmark('injectAvg', iterations, createVarietyResolved));\n}\nclass A {\n  constructor() {\n    count++;\n  }\n}\nObject.defineProperty(A, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nclass B {\n  constructor(a) {\n    assert.argumentTypes(a, A);\n    count++;\n  }\n}\nObject.defineProperty(B, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(B, \"parameters\", {get: function() {\n    return [[A]];\n  }});\nclass C {\n  constructor(b) {\n    assert.argumentTypes(b, B);\n    count++;\n  }\n}\nObject.defineProperty(C, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(C, \"parameters\", {get: function() {\n    return [[B]];\n  }});\nclass D {\n  constructor(c, b) {\n    assert.argumentTypes(c, C, b, B);\n    count++;\n  }\n}\nObject.defineProperty(D, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(D, \"parameters\", {get: function() {\n    return [[C], [B]];\n  }});\nclass E {\n  constructor(d, c) {\n    assert.argumentTypes(d, D, c, C);\n    count++;\n  }\n}\nObject.defineProperty(E, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(E, \"parameters\", {get: function() {\n    return [[D], [C]];\n  }});\nclass F {\n  constructor(e, d) {\n    assert.argumentTypes(e, E, d, D);\n    count++;\n  }\n}\nObject.defineProperty(F, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(F, \"parameters\", {get: function() {\n    return [[E], [D]];\n  }});\n//# sourceMappingURL=di_benchmark.js.map\n\n//# sourceMappingURL=./di_benchmark.map"]}