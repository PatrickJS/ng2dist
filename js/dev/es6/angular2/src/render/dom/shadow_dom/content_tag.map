{"version":3,"sources":["content_tag.js"],"names":[],"mappings":"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","file":"angular2/src/render/dom/shadow_dom/content_tag.es6","sourcesContent":["import * as ldModule from './light_dom';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {isPresent} from 'angular2/src/facade/lang';\nimport {List, ListWrapper} from 'angular2/src/facade/collection';\n\nclass ContentStrategy {\n  nodes:List;\n  insert(nodes:List){}\n}\n\n/**\n * An implementation of the content tag that is used by transcluding components.\n * It is used when the content tag is not a direct child of another component,\n * and thus does not affect redistribution.\n */\nclass RenderedContent extends ContentStrategy {\n  beginScript;\n  endScript;\n\n  constructor(contentEl) {\n    super();\n    this.beginScript = contentEl;\n    this.endScript = DOM.nextSibling(this.beginScript);\n    this.nodes = [];\n  }\n\n  // Inserts the nodes in between the start and end scripts.\n  // Previous content is removed.\n  insert(nodes:List) {\n    this.nodes = nodes;\n    DOM.insertAllBefore(this.endScript, nodes);\n    this._removeNodesUntil(ListWrapper.isEmpty(nodes) ? this.endScript : nodes[0]);\n  }\n\n  _removeNodesUntil(node) {\n    var p = DOM.parentElement(this.beginScript);\n    for (var next = DOM.nextSibling(this.beginScript);\n         next !== node;\n         next = DOM.nextSibling(this.beginScript)) {\n      DOM.removeChild(p, next);\n    }\n  }\n}\n\n/**\n * An implementation of the content tag that is used by transcluding components.\n * It is used when the content tag is a direct child of another component,\n * and thus does not get rendered but only affect the distribution of its parent component.\n */\nclass IntermediateContent extends ContentStrategy {\n  destinationLightDom:ldModule.LightDom;\n\n  constructor(destinationLightDom:ldModule.LightDom) {\n    super();\n    this.nodes = [];\n    this.destinationLightDom = destinationLightDom;\n  }\n\n  insert(nodes:List) {\n    this.nodes = nodes;\n    this.destinationLightDom.redistribute();\n  }\n}\n\n\nexport class Content {\n  select:string;\n  _strategy:ContentStrategy;\n  contentStartElement;\n\n  constructor(contentStartEl, selector:string) {\n    this.select = selector;\n    this.contentStartElement = contentStartEl;\n    this._strategy = null;\n  }\n\n  hydrate(destinationLightDom:ldModule.LightDom) {\n    this._strategy = isPresent(destinationLightDom) ?\n      new IntermediateContent(destinationLightDom) :\n      new RenderedContent(this.contentStartElement);\n  }\n\n  dehydrate() {\n    this._strategy = null;\n  }\n\n  nodes():List {\n    return this._strategy.nodes;\n  }\n\n  insert(nodes:List) {\n    this._strategy.insert(nodes);\n  }\n}\n"]}