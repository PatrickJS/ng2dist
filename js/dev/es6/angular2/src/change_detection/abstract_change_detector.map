{"version":3,"sources":["abstract_change_detector.js"],"names":[],"mappings":"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","file":"angular2/src/change_detection/abstract_change_detector.es6","sourcesContent":["import {isPresent} from 'angular2/src/facade/lang';\nimport {List, ListWrapper} from 'angular2/src/facade/collection';\nimport {BindingPropagationConfig} from './binding_propagation_config';\nimport {ChangeDetector} from './interfaces';\nimport {CHECK_ALWAYS, CHECK_ONCE, CHECKED, DETACHED, ON_PUSH} from './constants';\n\nexport class AbstractChangeDetector extends ChangeDetector {\n  lightDomChildren:List;\n  shadowDomChildren:List;\n  parent:ChangeDetector;\n  mode:string;\n  bindingPropagationConfig:BindingPropagationConfig;\n\n  constructor() {\n    super();\n    this.lightDomChildren = [];\n    this.shadowDomChildren = [];\n    this.bindingPropagationConfig = new BindingPropagationConfig(this);\n    this.mode = null;\n  }\n\n  addChild(cd:ChangeDetector) {\n    ListWrapper.push(this.lightDomChildren, cd);\n    cd.parent = this;\n  }\n\n  removeChild(cd:ChangeDetector) {\n    ListWrapper.remove(this.lightDomChildren, cd);\n  }\n\n  addShadowDomChild(cd:ChangeDetector) {\n    ListWrapper.push(this.shadowDomChildren, cd);\n    cd.parent = this;\n  }\n\n  remove() {\n    this.parent.removeChild(this);\n  }\n\n  detectChanges() {\n    this._detectChanges(false);\n  }\n\n  checkNoChanges() {\n    this._detectChanges(true);\n  }\n\n  _detectChanges(throwOnChange:boolean) {\n    if (this.mode === DETACHED || this.mode === CHECKED) return;\n\n    this.detectChangesInRecords(throwOnChange);\n\n    this._detectChangesInLightDomChildren(throwOnChange);\n\n    this.callOnAllChangesDone();\n\n    this._detectChangesInShadowDomChildren(throwOnChange);\n\n    if (this.mode === CHECK_ONCE) this.mode = CHECKED;\n  }\n\n  detectChangesInRecords(throwOnChange:boolean){}\n  callOnAllChangesDone(){}\n\n  _detectChangesInLightDomChildren(throwOnChange:boolean) {\n    var c = this.lightDomChildren;\n    for(var i = 0; i < c.length; ++i) {\n      c[i]._detectChanges(throwOnChange);\n    }\n  }\n\n  _detectChangesInShadowDomChildren(throwOnChange:boolean) {\n    var c = this.shadowDomChildren;\n    for(var i = 0; i < c.length; ++i) {\n      c[i]._detectChanges(throwOnChange);\n    }\n  }\n\n  markPathToRootAsCheckOnce() {\n    var c = this;\n    while(isPresent(c) && c.mode != DETACHED) {\n      if (c.mode === CHECKED) c.mode = CHECK_ONCE;\n      c = c.parent;\n    }\n  }\n}\n"]}