{"version":3,"sources":["directive_metadata_reader_spec.js"],"names":[],"mappings":"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","file":"angular2/test/core/compiler/directive_metadata_reader_spec.es6","sourcesContent":["import {isPresent} from 'angular2/src/facade/lang';\nimport {ListWrapper} from 'angular2/src/facade/collection';\nimport {ddescribe, describe, it, iit, expect, beforeEach} from 'angular2/test_lib';\nimport {DirectiveMetadataReader} from 'angular2/src/core/compiler/directive_metadata_reader';\nimport {Decorator, Component, Viewport} from 'angular2/src/core/annotations/annotations';\nimport {DirectiveMetadata} from 'angular2/src/core/compiler/directive_metadata';\nimport {Injectable, Injector} from 'angular2/di';\n\n@Injectable()\nclass SomeInjectable {}\n\n@Decorator({selector: 'someDecorator'})\nclass SomeDecorator {}\n\n@Component({selector: 'someComponent', injectables: [SomeInjectable]})\nclass SomeComponent {}\n\n@Viewport({selector: 'someViewport'})\nclass SomeViewport {}\n\nclass SomeDirectiveWithoutAnnotation {\n}\n\nexport function main() {\n  describe(\"DirectiveMetadataReader\", () => {\n    var reader;\n\n    beforeEach(() => {\n      reader = new DirectiveMetadataReader();\n    });\n\n    it('should read out the Decorator annotation', () => {\n      var directiveMetadata = reader.read(SomeDecorator);\n      expect(directiveMetadata).toEqual(\n        new DirectiveMetadata(SomeDecorator, new Decorator({selector: 'someDecorator'}), null));\n    });\n\n    it('should read out the Viewport annotation', () => {\n      var directiveMetadata = reader.read(SomeViewport);\n      expect(directiveMetadata).toEqual(\n        new DirectiveMetadata(SomeViewport, new Viewport({selector: 'someViewport'}), null));\n    });\n\n    it('should read out the Component annotation', () => {\n      var m = reader.read(SomeComponent);\n      // For some reason `toEqual` fails to compare ResolvedBinding objects.\n      // Have to decompose and compare.\n      expect(m.type).toEqual(SomeComponent);\n      expect(m.annotation)\n          .toEqual(new Component({selector: 'someComponent', injectables: [SomeInjectable]}));\n      var resolvedList = ListWrapper.reduce(m.resolvedInjectables, function(prev, elem) {\n        if (isPresent(elem)) {\n          ListWrapper.push(prev, elem);\n        }\n        return prev;\n      }, []);\n      expect(resolvedList.length).toBe(1);\n      expect(resolvedList[0].key.token).toBe(SomeInjectable);\n    });\n\n    it('should throw if not matching annotation is found', () => {\n      expect(() => {\n        reader.read(SomeDirectiveWithoutAnnotation);\n      }).toThrowError('No Directive annotation found on SomeDirectiveWithoutAnnotation');\n    });\n  });\n}\n"]}