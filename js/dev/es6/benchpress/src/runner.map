{"version":3,"sources":["runner.js"],"names":[],"mappings":"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","file":"benchpress/src/runner.es6","sourcesContent":["import { Injector, bind } from 'angular2/di';\nimport { isPresent, isBlank } from 'angular2/src/facade/lang';\nimport { List, ListWrapper } from 'angular2/src/facade/collection';\nimport { Promise } from 'angular2/src/facade/async';\n\nimport { Sampler, SampleState } from './sampler';\nimport { ConsoleReporter } from './reporter/console_reporter';\nimport { MultiReporter } from './reporter/multi_reporter';\nimport { RegressionSlopeValidator } from './validator/regression_slope_validator';\nimport { SizeValidator } from './validator/size_validator';\nimport { Validator } from './validator';\nimport { PerflogMetric } from './metric/perflog_metric';\nimport { MultiMetric } from './metric/multi_metric';\nimport { ChromeDriverExtension } from './webdriver/chrome_driver_extension';\nimport { IOsDriverExtension } from './webdriver/ios_driver_extension';\nimport { WebDriverExtension } from './web_driver_extension';\nimport { SampleDescription } from './sample_description';\nimport { WebDriverAdapter } from './web_driver_adapter';\nimport { Reporter } from './reporter';\nimport { Metric } from './metric';\nimport { Options } from './common_options';\n\n/**\n * The Runner is the main entry point for executing a sample run.\n * It provides defaults, creates the injector and calls the sampler.\n */\nexport class Runner {\n  _defaultBindings:List;\n\n  constructor(defaultBindings:List = null) {\n    if (isBlank(defaultBindings)) {\n      defaultBindings = [];\n    }\n    this._defaultBindings = defaultBindings;\n  }\n\n  sample({id, execute, prepare, microMetrics, bindings}):Promise<SampleState> {\n    var sampleBindings = [\n      _DEFAULT_BINDINGS,\n      this._defaultBindings,\n      bind(Options.SAMPLE_ID).toValue(id),\n      bind(Options.EXECUTE).toValue(execute)\n    ];\n    if (isPresent(prepare)) {\n      ListWrapper.push(sampleBindings, bind(Options.PREPARE).toValue(prepare));\n    }\n    if (isPresent(microMetrics)) {\n      ListWrapper.push(sampleBindings, bind(Options.MICRO_METRICS).toValue(microMetrics));\n    }\n    if (isPresent(bindings)) {\n      ListWrapper.push(sampleBindings, bindings);\n    }\n    return Injector.resolveAndCreate(sampleBindings).asyncGet(Sampler)\n      .then( (sampler) => sampler.sample() );\n  }\n}\n\nvar _DEFAULT_BINDINGS = [\n  Options.DEFAULT_BINDINGS,\n  Sampler.BINDINGS,\n  ConsoleReporter.BINDINGS,\n  RegressionSlopeValidator.BINDINGS,\n  SizeValidator.BINDINGS,\n  ChromeDriverExtension.BINDINGS,\n  IOsDriverExtension.BINDINGS,\n  PerflogMetric.BINDINGS,\n  SampleDescription.BINDINGS,\n  MultiReporter.createBindings([ConsoleReporter]),\n  MultiMetric.createBindings([PerflogMetric]),\n\n  Reporter.bindTo(MultiReporter),\n  Validator.bindTo(RegressionSlopeValidator),\n  WebDriverExtension.bindTo([ChromeDriverExtension, IOsDriverExtension]),\n  Metric.bindTo(MultiMetric),\n\n  bind(Options.CAPABILITIES).toAsyncFactory(\n    (adapter) => adapter.capabilities(), [WebDriverAdapter]\n  ),\n  bind(Options.USER_AGENT).toAsyncFactory(\n    (adapter) => adapter.executeScript('return window.navigator.userAgent;'), [WebDriverAdapter]\n  )\n];\n"]}