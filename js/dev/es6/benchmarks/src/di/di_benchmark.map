{"version":3,"sources":["di_benchmark.js"],"names":[],"mappings":"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","file":"benchmarks/src/di/di_benchmark.es6","sourcesContent":["import {Injectable, Injector, Key, bind} from \"angular2/di\";\nimport {reflector} from 'angular2/src/reflection/reflection';\nimport {ReflectionCapabilities} from 'angular2/src/reflection/reflection_capabilities';\nimport {getIntParameter, bindAction, microBenchmark} from 'angular2/src/test_lib/benchmark_util';\nimport {BrowserDomAdapter} from 'angular2/src/dom/browser_adapter';\n\nvar count = 0;\n\nfunction setupReflector() {\n  reflector.reflectionCapabilities = new ReflectionCapabilities();\n}\n\nexport function main() {\n  BrowserDomAdapter.makeCurrent();\n  var iterations = getIntParameter('iterations');\n\n  setupReflector();\n  var bindings = [A, B, C, D, E];\n  var injector = Injector.resolveAndCreate(bindings);\n\n  var D_KEY = Key.get(D);\n  var E_KEY = Key.get(E);\n  var childInjector = injector.\n    resolveAndCreateChild([]).\n    resolveAndCreateChild([]).\n    resolveAndCreateChild([]).\n    resolveAndCreateChild([]).\n    resolveAndCreateChild([]);\n\n  var variousBindings = [\n    A,\n    bind(B).toClass(C),\n    [D, [E]],\n    bind(F).toValue(6)\n  ];\n\n  var variousBindingsResolved = Injector.resolve(variousBindings);\n\n  function getByToken() {\n    for (var i = 0; i < iterations; ++i) {\n      injector.get(D);\n      injector.get(E);\n    }\n  }\n  function getByKey() {\n    for (var i = 0; i < iterations; ++i) {\n      injector.get(D_KEY);\n      injector.get(E_KEY);\n    }\n  }\n\n  function getChild() {\n    for (var i = 0; i < iterations; ++i) {\n      childInjector.get(D);\n      childInjector.get(E);\n    }\n  }\n\n  function instantiate() {\n    for (var i = 0; i < iterations; ++i) {\n      var child = injector.resolveAndCreateChild([E]);\n      child.get(E);\n    }\n  }\n\n  /**\n   * Creates an injector with a variety of binding types.\n   */\n  function createVariety() {\n    for (var i = 0; i < iterations; ++i) {\n      Injector.resolveAndCreate(variousBindings);\n    }\n  }\n\n  /**\n   * Same as [createVariety] but resolves bindings ahead of time.\n   */\n  function createVarietyResolved() {\n    for (var i = 0; i < iterations; ++i) {\n      Injector.fromResolvedBindings(variousBindingsResolved);\n    }\n  }\n\n  bindAction(\n    '#getByToken',\n    () => microBenchmark('injectAvg', iterations, getByToken)\n  );\n  bindAction(\n    '#getByKey',\n    () => microBenchmark('injectAvg', iterations, getByKey)\n  );\n  bindAction(\n    '#getChild',\n    () => microBenchmark('injectAvg', iterations, getChild)\n  );\n  bindAction(\n    '#instantiate',\n    () => microBenchmark('injectAvg', iterations, instantiate)\n  );\n  bindAction(\n    '#createVariety',\n    () => microBenchmark('injectAvg', iterations, createVariety)\n  );\n  bindAction(\n    '#createVarietyResolved',\n    () => microBenchmark('injectAvg', iterations, createVarietyResolved)\n  );\n}\n\n\n\n@Injectable()\nclass A {\n  constructor() {\n    count++;\n  }\n}\n\n@Injectable()\nclass B {\n  constructor(a:A) {\n    count++;\n  }\n}\n\n@Injectable()\nclass C {\n  constructor(b:B) {\n    count++;\n  }\n}\n\n@Injectable()\nclass D {\n  constructor(c:C, b:B) {\n    count++;\n  }\n}\n\n@Injectable()\nclass E {\n  constructor(d:D, c:C) {\n    count++;\n  }\n}\n\n@Injectable()\nclass F {\n  constructor(e:E, d:D) {\n    count++;\n  }\n}\n"]}