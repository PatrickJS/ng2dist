{"version":3,"sources":["element_injector_benchmark.js"],"names":[],"mappings":"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","file":"benchmarks/src/element_injector/element_injector_benchmark.es6","sourcesContent":["import {reflector} from 'angular2/src/reflection/reflection';\nimport {ReflectionCapabilities} from 'angular2/src/reflection/reflection_capabilities';\nimport {Injectable, Injector} from 'angular2/di';\nimport {ProtoElementInjector} from 'angular2/src/core/compiler/element_injector';\nimport {getIntParameter, bindAction, microBenchmark} from 'angular2/src/test_lib/benchmark_util';\nimport {BrowserDomAdapter} from 'angular2/src/dom/browser_adapter';\n\nvar count = 0;\n\nexport function main() {\n  BrowserDomAdapter.makeCurrent();\n  var iterations = getIntParameter('iterations');\n\n  reflector.reflectionCapabilities = new ReflectionCapabilities();\n  var appInjector = Injector.resolveAndCreate([]);\n\n  var bindings = [A, B, C];\n  var proto = new ProtoElementInjector(null, 0, bindings);\n  var elementInjector = proto.instantiate(null);\n\n  function instantiate () {\n    for (var i = 0; i < iterations; ++i) {\n      var ei = proto.instantiate(null);\n      ei.instantiateDirectives(appInjector, null, null, null);\n    }\n  }\n\n  function instantiateDirectives () {\n    for (var i = 0; i < iterations; ++i) {\n      elementInjector.clearDirectives();\n      elementInjector.instantiateDirectives(appInjector, null, null, null);\n    }\n  }\n\n  bindAction(\n    '#instantiate',\n    () => microBenchmark('instantiateAvg', iterations, instantiate)\n  );\n  bindAction(\n    '#instantiateDirectives',\n    () => microBenchmark('instantiateAvg', iterations, instantiateDirectives)\n  );\n}\n\n@Injectable()\nclass A {\n  constructor() {\n    count++;\n  }\n}\n\n@Injectable()\nclass B {\n  constructor() {\n    count++;\n  }\n}\n\n@Injectable()\nclass C {\n  constructor(a:A, b:B) {\n    count++;\n  }\n}\n"]}