{"version":3,"sources":["async_spec.js"],"names":[],"mappings":"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","file":"angular2/test/facade/async_spec.js","sourcesContent":["import {describe, it, expect, beforeEach, ddescribe, iit, xit, el,\n  SpyObject, AsyncTestCompleter, inject, IS_DARTIUM} from 'angular2/test_lib';\n\nimport {ObservableWrapper, Observable, ObservableController, PromiseWrapper} from 'angular2/src/facade/async';\n\nexport function main() {\n  describe('Observable', () => {\n    var obs:Observable;\n    var controller:ObservableController;\n\n    beforeEach(() => {\n      controller = ObservableWrapper.createController();\n      obs = ObservableWrapper.createObservable(controller);\n    });\n\n    it(\"should call the next callback\",  inject([AsyncTestCompleter], (async) => {\n      ObservableWrapper.subscribe(obs, (value) => {\n        expect(value).toEqual(99);\n        async.done();\n      });\n\n      ObservableWrapper.callNext(controller, 99);\n    }));\n\n    it(\"should call the throw callback\", inject([AsyncTestCompleter], (async) => {\n      ObservableWrapper.subscribe(obs, (_) => {}, (error) => {\n        expect(error).toEqual(\"Boom\");\n        async.done();\n      });\n      ObservableWrapper.callThrow(controller, \"Boom\");\n    }));\n\n    it(\"should call the return callback\", inject([AsyncTestCompleter], (async) => {\n      ObservableWrapper.subscribe(obs, (_) => {}, (_) => {}, () => {\n        async.done();\n      });\n\n      ObservableWrapper.callReturn(controller);\n    }));\n\n    it(\"should subscribe to the wrapper asynchronously\", () => {\n      var called = false;\n      ObservableWrapper.subscribe(obs, (value) => {\n        called = true;\n      });\n\n      ObservableWrapper.callNext(controller, 99);\n      expect(called).toBe(false);\n    });\n\n    if (!IS_DARTIUM) {\n      // See here: https://github.com/jhusain/observable-spec\n      describe(\"Generator\", () => {\n        var generator;\n\n        beforeEach(() => {\n          generator = new SpyObject();\n          generator.spy(\"next\");\n          generator.spy(\"throw\");\n          generator.spy(\"return\");\n        });\n\n        it(\"should call next on the given generator\",  inject([AsyncTestCompleter], (async) => {\n          generator.spy(\"next\").andCallFake((value) => {\n            expect(value).toEqual(99);\n            async.done();\n          });\n\n          ObservableWrapper.subscribe(obs, generator);\n          ObservableWrapper.callNext(controller, 99);\n        }));\n\n        it(\"should call throw on the given generator\", inject([AsyncTestCompleter], (async) => {\n          generator.spy(\"throw\").andCallFake((error) => {\n            expect(error).toEqual(\"Boom\");\n            async.done();\n          });\n          ObservableWrapper.subscribe(obs, generator);\n          ObservableWrapper.callThrow(controller, \"Boom\");\n        }));\n\n        it(\"should call return on the given generator\", inject([AsyncTestCompleter], (async) => {\n          generator.spy(\"return\").andCallFake(() => {\n            async.done();\n          });\n          ObservableWrapper.subscribe(obs, generator);\n          ObservableWrapper.callReturn(controller);\n        }));\n      });\n    }\n\n    //TODO: vsavkin: add tests cases\n    //should call dispose on the subscription if generator returns {done:true}\n    //should call dispose on the subscription on throw\n    //should call dispose on the subscription on return\n });\n}\n\n//make sure rx observables are async"]}