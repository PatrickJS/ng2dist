{"version":3,"sources":["template_loader_spec.js"],"names":[],"mappings":"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","file":"angular2/test/render/dom/compiler/template_loader_spec.js","sourcesContent":["import {\n  AsyncTestCompleter,\n  beforeEach,\n  ddescribe,\n  describe,\n  el,\n  expect,\n  iit,\n  inject,\n  it,\n  xit,\n} from 'angular2/test_lib';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {TemplateLoader} from 'angular2/src/render/dom/compiler/template_loader';\nimport {UrlResolver} from 'angular2/src/services/url_resolver';\n\nimport {ViewDefinition} from 'angular2/src/render/api';\nimport {PromiseWrapper} from 'angular2/src/facade/async';\nimport {MockXHR} from 'angular2/src/mock/xhr_mock';\n\nexport function main() {\n  describe('TemplateLoader', () => {\n    var loader, xhr;\n\n    beforeEach(() => {\n      xhr = new MockXHR();\n      loader = new TemplateLoader(xhr, new FakeUrlResolver());\n    });\n\n    it('should load inline templates', inject([AsyncTestCompleter], (async) => {\n      var template = new ViewDefinition({template: 'template template'});\n      loader.load(template).then( (el) => {\n        expect(DOM.content(el)).toHaveText('template template');\n        async.done();\n      });\n    }));\n\n    it('should load templates through XHR', inject([AsyncTestCompleter], (async) => {\n      xhr.expect('base/foo', 'xhr template');\n      var template = new ViewDefinition({absUrl: 'base/foo'});\n      loader.load(template).then((el) => {\n        expect(DOM.content(el)).toHaveText('xhr template');\n        async.done();\n      });\n      xhr.flush();\n    }));\n\n    it('should cache template loaded through XHR', inject([AsyncTestCompleter], (async) => {\n      var firstEl;\n      xhr.expect('base/foo', 'xhr template');\n      var template = new ViewDefinition({absUrl: 'base/foo'});\n      loader.load(template)\n        .then((el) => {\n          firstEl = el;\n          return loader.load(template);\n        })\n        .then((el) =>{\n          expect(el).toBe(firstEl);\n          expect(DOM.content(el)).toHaveText('xhr template');\n          async.done();\n        });\n      xhr.flush();\n    }));\n\n    it('should throw when no template is defined', () => {\n      var template =  new ViewDefinition({template: null, absUrl: null});\n      expect(() => loader.load(template))\n        .toThrowError('View should have either the url or template property set');\n    });\n\n    it('should return a rejected Promise when xhr loading fails', inject([AsyncTestCompleter], (async) => {\n      xhr.expect('base/foo', null);\n      var template = new ViewDefinition({absUrl: 'base/foo'});\n      PromiseWrapper.then(loader.load(template),\n        function(_) { throw 'Unexpected response'; },\n        function(error) {\n          expect(error).toEqual('Failed to load base/foo');\n          async.done();\n        }\n      )\n      xhr.flush();\n    }));\n\n  });\n}\n\nclass SomeComponent {\n}\n\nclass FakeUrlResolver extends UrlResolver {\n  constructor() {\n    super();\n  }\n\n  resolve(baseUrl: string, url: string): string {\n    return baseUrl + url;\n  }\n}\n"]}