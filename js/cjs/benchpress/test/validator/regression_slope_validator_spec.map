{"version":3,"sources":["regression_slope_validator_spec.js"],"names":[],"mappings":"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","file":"benchpress/test/validator/regression_slope_validator_spec.js","sourcesContent":["import {describe, ddescribe, it, iit, xit, expect, beforeEach, afterEach} from 'angular2/test_lib';\nimport { Date, DateWrapper } from 'angular2/src/facade/lang';\nimport { ListWrapper } from 'angular2/src/facade/collection';\n\nimport {\n  Validator, RegressionSlopeValidator, Injector, bind, MeasureValues\n} from 'benchpress/common';\n\nexport function main() {\n  describe('regression slope validator', () => {\n    var validator;\n\n    function createValidator({size, metric}) {\n      validator = Injector.resolveAndCreate([\n        RegressionSlopeValidator.BINDINGS,\n        bind(RegressionSlopeValidator.METRIC).toValue(metric),\n        bind(RegressionSlopeValidator.SAMPLE_SIZE).toValue(size)\n      ]).get(RegressionSlopeValidator);\n    }\n\n    it('should return sampleSize and metric as description', () => {\n      createValidator({size: 2, metric: 'script'});\n      expect(validator.describe()).toEqual({\n        'sampleSize': 2,\n        'regressionSlopeMetric': 'script'\n      });\n    });\n\n    it('should return null while the completeSample is smaller than the given size', () => {\n      createValidator({size: 2, metric: 'script'});\n      expect(validator.validate([])).toBe(null);\n      expect(validator.validate([mv(0,0,{})])).toBe(null);\n    });\n\n    it('should return null while the regression slope is < 0', () => {\n      createValidator({size: 2, metric: 'script'});\n      expect(validator.validate([mv(0,0,{'script':2}), mv(1,1,{'script':1})])).toBe(null);\n    });\n\n    it('should return the last sampleSize runs when the regression slope is ==0', () => {\n      createValidator({size: 2, metric: 'script'});\n      var sample = [mv(0,0,{'script':1}), mv(1,1,{'script':1}), mv(2,2,{'script':1})];\n      expect(validator.validate(ListWrapper.slice(sample,0,2))).toEqual(ListWrapper.slice(sample,0,2));\n      expect(validator.validate(sample)).toEqual(ListWrapper.slice(sample,1,3));\n    });\n\n    it('should return the last sampleSize runs when the regression slope is >0', () => {\n      createValidator({size: 2, metric: 'script'});\n      var sample = [mv(0,0,{'script':1}), mv(1,1,{'script':2}), mv(2,2,{'script':3})];\n      expect(validator.validate(ListWrapper.slice(sample,0,2))).toEqual(ListWrapper.slice(sample,0,2));\n      expect(validator.validate(sample)).toEqual(ListWrapper.slice(sample,1,3));\n    });\n\n  });\n}\n\nfunction mv(runIndex, time, values) {\n  return new MeasureValues(runIndex, DateWrapper.fromMillis(time), values);\n}\n"]}