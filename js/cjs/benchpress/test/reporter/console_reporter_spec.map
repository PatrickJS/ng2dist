{"version":3,"sources":["console_reporter_spec.js"],"names":[],"mappings":"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","file":"benchpress/test/reporter/console_reporter_spec.js","sourcesContent":["import {describe, ddescribe, it, iit, xit, expect, beforeEach, afterEach} from 'angular2/test_lib';\n\nimport { isBlank, isPresent, Date, DateWrapper } from 'angular2/src/facade/lang';\nimport { List, ListWrapper } from 'angular2/src/facade/collection';\n\nimport {\n  SampleState, Reporter, bind, Injector,\n  ConsoleReporter, SampleDescription, MeasureValues\n} from 'benchpress/common';\n\nexport function main() {\n  describe('console reporter', () => {\n    var reporter;\n    var log;\n\n    function createReporter({columnWidth, sampleId, descriptions, metrics}) {\n      log = [];\n      if (isBlank(descriptions)) {\n        descriptions = [];\n      }\n      if (isBlank(sampleId)) {\n        sampleId = 'null';\n      }\n      var bindings = [\n        ConsoleReporter.BINDINGS,\n        bind(SampleDescription).toValue(new SampleDescription(sampleId, descriptions, metrics)),\n        bind(ConsoleReporter.PRINT).toValue((line) => ListWrapper.push(log, line))\n      ];\n      if (isPresent(columnWidth)) {\n        ListWrapper.push(bindings, bind(ConsoleReporter.COLUMN_WIDTH).toValue(columnWidth));\n      }\n      reporter = Injector.resolveAndCreate(bindings).get(ConsoleReporter);\n    }\n\n    it('should print the sample id, description and table header', () => {\n      createReporter({\n        columnWidth: 8,\n        sampleId: 'someSample',\n        descriptions: [{\n          'a': 1,\n          'b': 2\n        }],\n        metrics: {\n          'm1': 'some desc',\n          'm2': 'some other desc'\n        }\n      });\n      expect(log).toEqual([\n        'BENCHMARK someSample',\n        'Description:',\n        '- a: 1',\n        '- b: 2',\n        'Metrics:',\n        '- m1: some desc',\n        '- m2: some other desc',\n        '',\n        '      m1 |       m2',\n        '-------- | --------',\n      ]);\n    });\n\n    it('should print a table row', () => {\n      createReporter({\n        columnWidth: 8,\n        metrics: {\n          'a': '',\n          'b': ''\n        }\n      });\n      log = [];\n      reporter.reportMeasureValues(mv(0, 0, {\n        'a': 1.23, 'b': 2\n      }));\n      expect(log).toEqual([\n        '    1.23 |     2.00'\n      ]);\n    });\n\n    it('should print the table footer and stats when there is a valid sample', () => {\n      createReporter({\n        columnWidth: 8,\n        metrics: {\n          'a': '',\n          'b': ''\n        }\n      });\n      log = [];\n      reporter.reportSample([], [mv(0,0,{\n        'a': 3, 'b': 6\n      }), mv(1,1,{\n        'a': 5, 'b': 9\n      })]);\n      expect(log).toEqual([\n        '======== | ========',\n        '4.00+-25% | 7.50+-20%'\n      ]);\n    });\n\n  });\n}\n\nfunction mv(runIndex, time, values) {\n  return new MeasureValues(runIndex, DateWrapper.fromMillis(time), values);\n}\n"]}