{"version":3,"sources":["runner.js"],"names":[],"mappings":"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","file":"benchpress/src/runner.js","sourcesContent":["import { Injector, bind } from 'angular2/di';\nimport { isPresent, isBlank } from 'angular2/src/facade/lang';\nimport { List, ListWrapper } from 'angular2/src/facade/collection';\nimport { Promise } from 'angular2/src/facade/async';\n\nimport { Sampler, SampleState } from './sampler';\nimport { ConsoleReporter } from './reporter/console_reporter';\nimport { MultiReporter } from './reporter/multi_reporter';\nimport { RegressionSlopeValidator } from './validator/regression_slope_validator';\nimport { SizeValidator } from './validator/size_validator';\nimport { Validator } from './validator';\nimport { PerflogMetric } from './metric/perflog_metric';\nimport { MultiMetric } from './metric/multi_metric';\nimport { ChromeDriverExtension } from './webdriver/chrome_driver_extension';\nimport { IOsDriverExtension } from './webdriver/ios_driver_extension';\nimport { WebDriverExtension } from './web_driver_extension';\nimport { SampleDescription } from './sample_description';\nimport { WebDriverAdapter } from './web_driver_adapter';\nimport { Reporter } from './reporter';\nimport { Metric } from './metric';\nimport { Options } from './common_options';\n\n/**\n * The Runner is the main entry point for executing a sample run.\n * It provides defaults, creates the injector and calls the sampler.\n */\nexport class Runner {\n  _defaultBindings:List;\n\n  constructor(defaultBindings:List = null) {\n    if (isBlank(defaultBindings)) {\n      defaultBindings = [];\n    }\n    this._defaultBindings = defaultBindings;\n  }\n\n  sample({id, execute, prepare, microMetrics, bindings}):Promise<SampleState> {\n    var sampleBindings = [\n      _DEFAULT_BINDINGS,\n      this._defaultBindings,\n      bind(Options.SAMPLE_ID).toValue(id),\n      bind(Options.EXECUTE).toValue(execute)\n    ];\n    if (isPresent(prepare)) {\n      ListWrapper.push(sampleBindings, bind(Options.PREPARE).toValue(prepare));\n    }\n    if (isPresent(microMetrics)) {\n      ListWrapper.push(sampleBindings, bind(Options.MICRO_METRICS).toValue(microMetrics));\n    }\n    if (isPresent(bindings)) {\n      ListWrapper.push(sampleBindings, bindings);\n    }\n    return Injector.resolveAndCreate(sampleBindings).asyncGet(Sampler)\n      .then( (sampler) => sampler.sample() );\n  }\n}\n\nvar _DEFAULT_BINDINGS = [\n  Options.DEFAULT_BINDINGS,\n  Sampler.BINDINGS,\n  ConsoleReporter.BINDINGS,\n  RegressionSlopeValidator.BINDINGS,\n  SizeValidator.BINDINGS,\n  ChromeDriverExtension.BINDINGS,\n  IOsDriverExtension.BINDINGS,\n  PerflogMetric.BINDINGS,\n  SampleDescription.BINDINGS,\n  MultiReporter.createBindings([ConsoleReporter]),\n  MultiMetric.createBindings([PerflogMetric]),\n\n  Reporter.bindTo(MultiReporter),\n  Validator.bindTo(RegressionSlopeValidator),\n  WebDriverExtension.bindTo([ChromeDriverExtension, IOsDriverExtension]),\n  Metric.bindTo(MultiMetric),\n\n  bind(Options.CAPABILITIES).toAsyncFactory(\n    (adapter) => adapter.capabilities(), [WebDriverAdapter]\n  ),\n  bind(Options.USER_AGENT).toAsyncFactory(\n    (adapter) => adapter.executeScript('return window.navigator.userAgent;'), [WebDriverAdapter]\n  )\n];\n"]}